

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>isatex.defaultpanel &mdash; iSATex 0.0.5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> iSATex
          

          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">iSATex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">isatex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../history.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">iSATex</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>isatex.defaultpanel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for isatex.defaultpanel</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span><span class="p">,</span> <span class="n">isclose</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">basename</span>

<span class="kn">from</span> <span class="nn">keyboard</span> <span class="kn">import</span> <span class="n">is_pressed</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_wxagg</span> <span class="kn">import</span> <span class="p">(</span><span class="n">FigureCanvasWxAgg</span><span class="p">,</span>
                                               <span class="n">NavigationToolbar2WxAgg</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">matplotlib.cm</span> <span class="kn">import</span> <span class="n">get_cmap</span>
<span class="kn">from</span> <span class="nn">matplotlib.collections</span> <span class="kn">import</span> <span class="n">QuadMesh</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">matplotlib.gridspec</span> <span class="kn">import</span> <span class="n">GridSpec</span>
<span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Rectangle</span>
<span class="kn">from</span> <span class="nn">matplotlib.text</span> <span class="kn">import</span> <span class="n">Annotation</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="kn">from</span> <span class="nn">wx</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ALIGN_CENTER</span><span class="p">,</span> <span class="n">ALIGN_CENTER_VERTICAL</span><span class="p">,</span> <span class="n">ALL</span><span class="p">,</span> <span class="n">ART_CLOSE</span><span class="p">,</span>
                <span class="n">ART_GO_BACK</span><span class="p">,</span> <span class="n">ART_GO_DOWN</span><span class="p">,</span> <span class="n">ART_GO_FORWARD</span><span class="p">,</span> <span class="n">ART_GO_UP</span><span class="p">,</span>
                <span class="n">BORDER_NONE</span><span class="p">,</span> <span class="n">BOTTOM</span><span class="p">,</span> <span class="n">CB_READONLY</span><span class="p">,</span> <span class="n">CB_SORT</span><span class="p">,</span> <span class="n">CENTER</span><span class="p">,</span> <span class="n">EVT_BUTTON</span><span class="p">,</span>
                <span class="n">EVT_CHAR_HOOK</span><span class="p">,</span> <span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="n">EVT_COMBOBOX</span><span class="p">,</span>
                <span class="n">EVT_COMMAND_SCROLL_CHANGED</span><span class="p">,</span> <span class="n">EVT_LEFT_UP</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">,</span> <span class="n">HORIZONTAL</span><span class="p">,</span>
                <span class="n">ID_CANCEL</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="n">TE_MULTILINE</span><span class="p">,</span> <span class="n">TE_READONLY</span><span class="p">,</span> <span class="n">TOP</span><span class="p">,</span>
                <span class="n">VERTICAL</span><span class="p">,</span> <span class="n">ArtProvider</span><span class="p">,</span> <span class="n">BitmapButton</span><span class="p">,</span> <span class="n">BoxSizer</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span>
                <span class="n">NullColour</span><span class="p">,</span> <span class="n">Panel</span><span class="p">,</span> <span class="n">SizerFlags</span><span class="p">,</span> <span class="n">Slider</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">wx.lib.agw.ultimatelistctrl</span> <span class="kn">import</span> <span class="p">(</span><span class="n">EVT_LIST_ITEM_DESELECTED</span><span class="p">,</span>
                                         <span class="n">EVT_LIST_ITEM_SELECTED</span><span class="p">,</span>
                                         <span class="n">ULC_BORDER_SELECT</span><span class="p">,</span> <span class="n">ULC_FORMAT_CENTER</span><span class="p">,</span>
                                         <span class="n">ULC_HAS_VARIABLE_ROW_HEIGHT</span><span class="p">,</span>
                                         <span class="n">ULC_HRULES</span><span class="p">,</span> <span class="n">ULC_NO_FULL_ROW_SELECT</span><span class="p">,</span>
                                         <span class="n">ULC_REPORT</span><span class="p">,</span> <span class="n">UltimateListCtrl</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">wx.lib.scrolledpanel</span> <span class="kn">import</span> <span class="n">ScrolledPanel</span>

<span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="p">(</span><span class="n">COLOR_MANAGER</span><span class="p">,</span> <span class="n">DATA_MANAGER</span><span class="p">,</span> <span class="n">FUNCTION_MANAGER</span><span class="p">,</span>
                   <span class="n">MAPPING_MANAGER</span><span class="p">,</span> <span class="n">PEAK_MANAGER</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.container</span> <span class="kn">import</span> <span class="n">PanelBase</span>
<span class="kn">from</span> <span class="nn">.control</span> <span class="kn">import</span> <span class="p">(</span><span class="n">AddButton</span><span class="p">,</span> <span class="n">ClearButton</span><span class="p">,</span> <span class="n">ColormapEntry</span><span class="p">,</span> <span class="n">ExecuteButton</span><span class="p">,</span>
                     <span class="n">FunctionArgumentEntry</span><span class="p">,</span> <span class="n">FunctionListEntry</span><span class="p">,</span> <span class="n">HelpButton</span><span class="p">,</span>
                     <span class="n">LabeledValidateEntry</span><span class="p">,</span> <span class="n">NormalComboBox</span><span class="p">,</span> <span class="n">NormalEntry</span><span class="p">,</span>
                     <span class="n">NormalLine</span><span class="p">,</span> <span class="n">NormalText</span><span class="p">,</span> <span class="n">RegisterButton</span><span class="p">,</span> <span class="n">RegisterDialog</span><span class="p">,</span>
                     <span class="n">SetButton</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.objects</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ChoiceContainer</span><span class="p">,</span> <span class="n">DataContainer</span><span class="p">,</span> <span class="n">IntContainer</span><span class="p">,</span> <span class="n">Preset</span><span class="p">,</span>
                     <span class="n">Recipe</span><span class="p">,</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">)</span>


<span class="c1"># TODO: Focus is not obtained even if the list is selected. So the spectrum may not be drawn.</span>
<div class="viewcode-block" id="DataSelector"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector">[docs]</a><span class="k">class</span> <span class="nc">DataSelector</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for data selection</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span> <span class="o">=</span> <span class="n">UltimateListCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">agwStyle</span><span class="o">=</span><span class="n">ULC_HRULES</span> <span class="o">|</span> <span class="n">ULC_REPORT</span> <span class="o">|</span> <span class="n">ULC_BORDER_SELECT</span> <span class="o">|</span>
                                            <span class="n">ULC_NO_FULL_ROW_SELECT</span> <span class="o">|</span> <span class="n">ULC_HAS_VARIABLE_ROW_HEIGHT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_LIST_ITEM_SELECTED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnListItemSelected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_LIST_ITEM_DESELECTED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnListItemDeselected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_LEFT_UP</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnListItemLeftClick</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">heading</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;FILE NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;DATA SIZE&#39;</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">InsertColumn</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="n">ULC_FORMAT_CENTER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">SetColumnWidth</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">GetFirstSelected</span><span class="p">()</span>

        <span class="k">while</span> <span class="n">n_i</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n_i</span><span class="p">)</span>
            <span class="n">n_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">GetNextSelected</span><span class="p">(</span><span class="n">n_i</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">selection</span>

    <span class="k">def</span> <span class="nf">__OnListItemSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">is_pressed</span><span class="p">(</span><span class="s1">&#39;shift&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_pressed</span><span class="p">(</span><span class="s1">&#39;ctrl&#39;</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">Index</span>

    <span class="k">def</span> <span class="nf">__OnListItemDeselected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">Index</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__OnListItemLeftClick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetSelection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="p">,</span> <span class="n">selection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFocus</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__CreateRow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">DataContainer</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">DataContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Path</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">GetSpectrumSize</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">InsertStringItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">SetStringItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">SetStringItem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>

<div class="viewcode-block" id="DataSelector.OnProjectLoad"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector.OnProjectLoad">[docs]</a>    <span class="k">def</span> <span class="nf">OnProjectLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">DeleteAllItems</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__CreateRow</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataSelector.OnDataSelectionChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector.OnDataSelectionChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnDataSelectionChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetMainSelection</span><span class="p">()</span>
        <span class="n">prev_selection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetPreviousSelection</span><span class="p">())</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetAddedSelection</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetRemoveSelection</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__list_ctrl</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>

        <span class="c1"># for index in prev_selection:</span>
        <span class="c1">#     self.__list_ctrl.SetItemBackgroundColour(index, NullColour)</span>
        <span class="c1">#     item = self.__list_ctrl.GetItem(index)</span>
        <span class="c1">#     item.SetBackgroundColour(NullColour)</span>

        <span class="c1"># color = self.Get(DotChain(COLOR, SELECTION))</span>
        <span class="c1"># for index in selection:</span>
        <span class="c1">#     self.__list_ctrl.SetItemBackgroundColour(index, color)</span>
        <span class="c1">#     item = self.__list_ctrl.GetItem(index)</span>
        <span class="c1">#     item.SetBackgroundColour(color)</span>

        <span class="c1"># color = self.Get(DotChain(COLOR, MAIN_SELECTION))</span>
        <span class="c1"># if (index := self.__main_selection) is not None:</span>
        <span class="c1">#     self.__list_ctrl.SetItemBackgroundColour(index, color)</span>

        <span class="c1">#     item = self.__list_ctrl.GetItem(index)</span>
        <span class="c1">#     item.SetBackgroundColour(color)</span>

<div class="viewcode-block" id="DataSelector.NeedDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector.NeedDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="DataSelector.NeedPeaksDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector.NeedPeaksDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedPeaksDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="DataSelector.NeedMultiDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.DataSelector.NeedMultiDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedMultiDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.3</span></div></div>


<div class="viewcode-block" id="SpectrumPanel"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.SpectrumPanel">[docs]</a><span class="k">class</span> <span class="nc">SpectrumPanel</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for spectral display</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
        <span class="n">spec_list</span> <span class="o">=</span> <span class="n">GridSpec</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="n">height_ratios</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">spec_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bg_ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">spec_list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bg_ax</span><span class="o">.</span><span class="n">sharex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_ax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bg_ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasWxAgg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">MinSize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nav_toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2WxAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nav_toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

<div class="viewcode-block" id="SpectrumPanel.Clear"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.SpectrumPanel.Clear">[docs]</a>    <span class="k">def</span> <span class="nf">Clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clearing the display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bg_ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_IsActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nav_toolbar</span><span class="o">.</span><span class="n">GetToolState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nav_toolbar</span><span class="o">.</span><span class="n">wx_ids</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>

<div class="viewcode-block" id="SpectrumPanel.IsNormal"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.SpectrumPanel.IsNormal">[docs]</a>    <span class="k">def</span> <span class="nf">IsNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the state is operable or not</span>

<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_IsActive</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nav_toolbar</span><span class="o">.</span><span class="n">wx_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="PeakSelector"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PeakSelector">[docs]</a><span class="k">class</span> <span class="nc">PeakSelector</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel to select the peak</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span> <span class="o">=</span> <span class="n">NormalComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">CB_READONLY</span> <span class="o">|</span> <span class="n">CB_SORT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_COMBOBOX</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__PeakTypeSelected</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_frame_on</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasWxAgg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">MinSize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__SetPeakType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">peak_type</span><span class="o">.</span><span class="n">GetName</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetTex</span><span class="p">(</span><span class="n">peak_type</span><span class="o">.</span><span class="n">GetTex</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev_peak_type</span> <span class="o">=</span> <span class="n">peak_type</span>

    <span class="k">def</span> <span class="nf">__SetTex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tex</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">Annotation</span><span class="p">(</span><span class="n">tex</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__PeakTypeSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selected_peak_type_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
        <span class="n">peak_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PEAK_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">(</span><span class="n">selected_peak_type_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PEAK_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SelectPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>

<div class="viewcode-block" id="PeakSelector.OnProjectOpen"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PeakSelector.OnProjectOpen">[docs]</a>    <span class="k">def</span> <span class="nf">OnProjectOpen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="PeakSelector.OnPeakTypeRegisterEvent"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PeakSelector.OnPeakTypeRegisterEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnPeakTypeRegisterEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">peak_type_name_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakTypeNames</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_combo</span><span class="o">.</span><span class="n">SetItems</span><span class="p">(</span><span class="n">peak_type_name_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="PeakSelector.OnPeakTypeChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PeakSelector.OnPeakTypeChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnPeakTypeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="FunctionSelector"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.FunctionSelector">[docs]</a><span class="k">class</span> <span class="nc">FunctionSelector</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel to select a function</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span> <span class="o">=</span> <span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

<div class="viewcode-block" id="FunctionSelector.OnSpectrumFunctionRegister"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.FunctionSelector.OnSpectrumFunctionRegister">[docs]</a>    <span class="k">def</span> <span class="nf">OnSpectrumFunctionRegister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ClearContents</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">():</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">FunctionSelector</span><span class="o">.</span><span class="n">Contents</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="FunctionSelector.OnSpectrumFunctionDeregister"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.FunctionSelector.OnSpectrumFunctionDeregister">[docs]</a>    <span class="k">def</span> <span class="nf">OnSpectrumFunctionDeregister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">contents_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">contents</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">()</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="n">contents</span> <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()}</span>
        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">():</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">contents_dict</span><span class="p">[</span><span class="n">function</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__ClearContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">():</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">item_sizer</span><span class="o">.</span><span class="n">Window</span> <span class="k">for</span> <span class="n">item_sizer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="p">]</span>

<div class="viewcode-block" id="FunctionSelector.Contents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.FunctionSelector.Contents">[docs]</a>    <span class="k">class</span> <span class="nc">Contents</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_container</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__func_container</span> <span class="o">=</span> <span class="n">func_container</span>

            <span class="n">name</span> <span class="o">=</span> <span class="n">func_container</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">func_container</span><span class="o">.</span><span class="vm">__doc__</span>
            <span class="n">func_name_lbl</span> <span class="o">=</span> <span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="n">help_btn</span> <span class="o">=</span> <span class="n">HelpButton</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">add_btn</span> <span class="o">=</span> <span class="n">AddButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">add_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnAddBtnPushed</span><span class="p">())</span>
            <span class="n">contents_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="n">contents_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">func_name_lbl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALIGN_CENTER</span><span class="p">)</span>
            <span class="n">contents_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
            <span class="n">contents_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">help_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALIGN_CENTER</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
            <span class="n">contents_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">add_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALIGN_CENTER</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

<div class="viewcode-block" id="FunctionSelector.Contents.GetFunction"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.FunctionSelector.Contents.GetFunction">[docs]</a>        <span class="k">def</span> <span class="nf">GetFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__func_container</span></div>

        <span class="k">def</span> <span class="nf">__OnAddBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SelectSpectrumFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__func_container</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PresetSelector"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PresetSelector">[docs]</a><span class="k">class</span> <span class="nc">PresetSelector</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for select preset</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span> <span class="o">=</span> <span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__AddContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset_list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ClearContents</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">:</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">PresetSelector</span><span class="o">.</span><span class="n">Contents</span><span class="p">(</span><span class="n">preset</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnContentsClose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">(</span><span class="n">scrollToTop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scrollIntoView</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnContentsClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

        <span class="n">preset</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">GetPreset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">RegisterPreset</span><span class="p">(</span><span class="n">preset</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ClearContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">():</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">item_sizer</span><span class="o">.</span><span class="n">Window</span> <span class="k">for</span> <span class="n">item_sizer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="p">]</span>

<div class="viewcode-block" id="PresetSelector.OnPresetRegister"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PresetSelector.OnPresetRegister">[docs]</a>    <span class="k">def</span> <span class="nf">OnPresetRegister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">preset_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPresetList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__AddContentsList</span><span class="p">(</span><span class="n">preset_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="PresetSelector.Contents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PresetSelector.Contents">[docs]</a>    <span class="k">class</span> <span class="nc">Contents</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset</span><span class="p">:</span> <span class="n">Preset</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">preset</span><span class="p">,</span> <span class="n">Preset</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__preset</span> <span class="o">=</span> <span class="n">preset</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__preset</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
            <span class="n">name_lbl</span> <span class="o">=</span> <span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

            <span class="n">add_btn</span> <span class="o">=</span> <span class="n">AddButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">add_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__SendSpectrumFunctionSelectedEvent</span><span class="p">())</span>
            <span class="n">close_bitmap</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="p">()</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_CLOSE</span><span class="p">)</span>
            <span class="n">delete_btn</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">close_bitmap</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
            <span class="n">delete_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">())</span>
            <span class="n">header_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">name_lbl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALIGN_CENTER_VERTICAL</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">delete_btn</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">add_btn</span><span class="p">)</span>

            <span class="n">contents_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">func_container</span> <span class="ow">in</span> <span class="n">preset</span><span class="p">:</span>
                <span class="n">contents_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">func_container</span><span class="p">)))</span>

            <span class="n">contents_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="n">contents_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="n">contents_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents_v_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">header_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<div class="viewcode-block" id="PresetSelector.Contents.GetPreset"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.PresetSelector.Contents.GetPreset">[docs]</a>        <span class="k">def</span> <span class="nf">GetPreset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__preset</span></div>

        <span class="k">def</span> <span class="nf">__SendSpectrumFunctionSelectedEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SelectSpectrumPreset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__preset</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="RecipePanel"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel">[docs]</a><span class="k">class</span> <span class="nc">RecipePanel</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for editing the order of recipes and their arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span> <span class="o">=</span> <span class="n">SetButton</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnSetBtnPushed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span> <span class="o">=</span> <span class="n">ClearButton</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnClearBtnPushed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span> <span class="o">=</span> <span class="n">RegisterButton</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnRegisterBtnPushed</span><span class="p">())</span>
        <span class="n">ctrl_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span> <span class="o">=</span> <span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ctrl_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CHAR_HOOK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnCharHook</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Recipe</span><span class="p">([</span><span class="n">contents</span><span class="o">.</span><span class="n">GetFunctionContainer</span><span class="p">()</span> <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()])</span>

<div class="viewcode-block" id="RecipePanel.OnSpectrumFunctionListSelect"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.OnSpectrumFunctionListSelect">[docs]</a>    <span class="k">def</span> <span class="nf">OnSpectrumFunctionListSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">function_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">:</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">RecipePanel</span><span class="o">.</span><span class="n">Contents</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CLOSE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnContentsClose</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateCtrl</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecipePanel.OnPeakTypeChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.OnPeakTypeChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnPeakTypeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">():</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">UpdateContents</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecipePanel.ChangeOrder"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.ChangeOrder">[docs]</a>    <span class="k">def</span> <span class="nf">ChangeOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">after</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the order of the functions</span>

<span class="sd">        :param index: Index to specify the function to move from</span>
<span class="sd">        :type index: int</span>
<span class="sd">        :param after: Whether to move to later order., defaults to True</span>
<span class="sd">        :type after: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">RecipePanel</span><span class="o">.</span><span class="n">Contents</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">contents_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">t_i</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">contents_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">after</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">contents</span> <span class="o">=</span> <span class="n">contents_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">t_i</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="n">SizerFlags</span><span class="p">()</span><span class="o">.</span><span class="n">Border</span><span class="p">(</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">Border</span><span class="p">(</span><span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">Expand</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__HasValidRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">([</span><span class="n">contents</span><span class="o">.</span><span class="n">HasValidArguments</span><span class="p">()</span> <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()])</span>

    <span class="k">def</span> <span class="nf">__UpdateCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__HasValidRecipe</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">ItemCount</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__set_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__clear_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__register_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">sizer_item</span><span class="o">.</span><span class="n">Window</span> <span class="k">for</span> <span class="n">sizer_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__OnCharHook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateCtrl</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnContentsClose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">contents</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventObject</span><span class="p">()</span>
        <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnSetBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">recipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetRecipe</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">ApplyRecipe</span><span class="p">(</span><span class="n">recipe</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnClearBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="n">contents_list</span><span class="p">:</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateCtrl</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnRegisterBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">preset_name_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetPresetNames</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">RegisterDialog</span><span class="p">(</span><span class="n">preset_name_list</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span> <span class="k">as</span> <span class="n">dialog</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_CANCEL</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">name</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>

        <span class="n">recipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetRecipe</span><span class="p">()</span>
        <span class="n">preset</span> <span class="o">=</span> <span class="n">Preset</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">recipe</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">RegisterPreset</span><span class="p">(</span><span class="n">preset</span><span class="p">)</span>

<div class="viewcode-block" id="RecipePanel.Contents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.Contents">[docs]</a>    <span class="k">class</span> <span class="nc">Contents</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_container</span><span class="p">:</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__func_name_lbl</span> <span class="o">=</span> <span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">func_container</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">close_bitmap</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="p">()</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_CLOSE</span><span class="p">)</span>
            <span class="n">delete_btn</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">close_bitmap</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
            <span class="n">delete_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Close</span><span class="p">())</span>
            <span class="n">header_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__func_name_lbl</span><span class="p">)</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
            <span class="n">header_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">delete_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ALIGN_CENTER</span> <span class="o">|</span> <span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__func_arg_ety</span> <span class="o">=</span> <span class="n">FunctionArgumentEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func_container</span><span class="p">)</span>

            <span class="n">contents_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">contents_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">header_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="n">contents_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__func_arg_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

            <span class="n">art_go_up</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_GO_UP</span><span class="p">)</span>
            <span class="n">up_button</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">art_go_up</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>
            <span class="n">up_button</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">ChangeOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

            <span class="n">art_go_down</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_GO_DOWN</span><span class="p">)</span>
            <span class="n">down_button</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">art_go_down</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>
            <span class="n">down_button</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">ChangeOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>

            <span class="n">arrow_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="n">arrow_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">up_button</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">arrow_v_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
            <span class="n">arrow_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">down_button</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="n">h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="n">h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents_v_sizer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="n">h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="n">h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">arrow_v_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<div class="viewcode-block" id="RecipePanel.Contents.GetFunctionContainer"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.Contents.GetFunctionContainer">[docs]</a>        <span class="k">def</span> <span class="nf">GetFunctionContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__func_arg_ety</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecipePanel.Contents.HasValidArguments"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.Contents.HasValidArguments">[docs]</a>        <span class="k">def</span> <span class="nf">HasValidArguments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__func_arg_ety</span><span class="o">.</span><span class="n">HasValidArguments</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecipePanel.Contents.UpdateContents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecipePanel.Contents.UpdateContents">[docs]</a>        <span class="k">def</span> <span class="nf">UpdateContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__func_arg_ety</span><span class="o">.</span><span class="n">UpdateContents</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

        <span class="k">def</span> <span class="nf">__OnCharHook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">NullColour</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasValidArguments</span><span class="p">()</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">COLOR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetErrorColor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__func_name_lbl</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ExecutePanel"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.ExecutePanel">[docs]</a><span class="k">class</span> <span class="nc">ExecutePanel</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for function execution</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__execute_btn</span> <span class="o">=</span> <span class="n">ExecuteButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__execute_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnExecuteBtnPushed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__execute_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span> <span class="o">=</span> <span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__execute_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CENTER</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__SetData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">DataContainer</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">DataContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">func_container</span><span class="p">,</span> <span class="n">success</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Recipe</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">SuccessList</span><span class="p">):</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">ExecutePanel</span><span class="o">.</span><span class="n">Contents</span><span class="p">(</span><span class="n">func_container</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__execute_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__HasData</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__OnExecuteBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">ExecuteSpectrumFunction</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ClearContents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">():</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">sizer_item</span><span class="o">.</span><span class="n">Window</span> <span class="k">for</span> <span class="n">sizer_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="p">]</span>

<div class="viewcode-block" id="ExecutePanel.OnDataSelectionChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.ExecutePanel.OnDataSelectionChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnDataSelectionChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ClearContents</span><span class="p">()</span>

        <span class="n">main_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetMainSelection</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">main_selection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">main_selection</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExecutePanel.OnDataContentsChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.ExecutePanel.OnDataContentsChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnDataContentsChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__HasData</span><span class="p">()</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">IsRecipeChanged</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__index</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ClearContents</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__SetData</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExecutePanel.Contents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.ExecutePanel.Contents">[docs]</a>    <span class="k">class</span> <span class="nc">Contents</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_container</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__state_beacon</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__state_beacon</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">function_container</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__state_beacon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">SetSuccess</span><span class="p">(</span><span class="n">success</span><span class="p">)</span>

<div class="viewcode-block" id="ExecutePanel.Contents.SetSuccess"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.ExecutePanel.Contents.SetSuccess">[docs]</a>        <span class="k">def</span> <span class="nf">SetSuccess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">success</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">success</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">NullColour</span>
            <span class="k">elif</span> <span class="n">success</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">COLOR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSuccessColor</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">COLOR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetErrorColor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__state_beacon</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></div></div></div>


<div class="viewcode-block" id="RecoveryPanel"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel">[docs]</a><span class="k">class</span> <span class="nc">RecoveryPanel</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for recovering data from history.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="n">go_back_bitmap</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="p">()</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_GO_BACK</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">go_back_bitmap</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span><span class="o">.</span><span class="n">SetMaxSize</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">[</span><span class="n">contents</span><span class="o">.</span><span class="n">TimeShift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()])</span>

        <span class="n">go_forward_bitmap</span> <span class="o">=</span> <span class="n">ArtProvider</span><span class="p">()</span><span class="o">.</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">ART_GO_FORWARD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span> <span class="o">=</span> <span class="n">BitmapButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bitmap</span><span class="o">=</span><span class="n">go_forward_bitmap</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span><span class="o">.</span><span class="n">SetMaxSize</span><span class="p">((</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="p">[</span><span class="n">contents</span><span class="o">.</span><span class="n">TimeShift</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()])</span>

        <span class="n">restore_btn_panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__restore_btn</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">restore_btn_panel</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;RESTORE&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__restore_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__restore_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnRestoreBtnPushed</span><span class="p">())</span>
        <span class="n">restore_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">restore_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__restore_btn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CENTER</span><span class="p">)</span>
        <span class="n">restore_btn_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="n">restore_sizer</span><span class="p">)</span>

        <span class="n">ctrl_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="n">ctrl_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">restore_btn_panel</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">CENTER</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span> <span class="o">=</span> <span class="n">ScrolledPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetSizer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_v_sizer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ctrl_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

<div class="viewcode-block" id="RecoveryPanel.OnSliderShifted"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.OnSliderShifted">[docs]</a>    <span class="k">def</span> <span class="nf">OnSliderShifted</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">__AddContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()</span>
        <span class="n">crt_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">contents_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="n">crt_size</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">crt_size</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">RecoveryPanel</span><span class="o">.</span><span class="n">Contents</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">crt_size</span><span class="p">)):</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">contents_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnRestoreBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()</span>

        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">contents_list</span><span class="p">)))</span>

        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">selection</span><span class="p">,</span> <span class="n">data_list</span><span class="p">):</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">contents_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">GetDelta</span><span class="p">()</span>
            <span class="n">data</span><span class="o">.</span><span class="n">Restore</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">selection</span><span class="p">,</span> <span class="n">data_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetContentsList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">item_sizer</span><span class="o">.</span><span class="n">Window</span> <span class="k">for</span> <span class="n">item_sizer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__contents_v_sizer</span><span class="p">]</span>

<div class="viewcode-block" id="RecoveryPanel.OnProjectLoad"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.OnProjectLoad">[docs]</a>    <span class="k">def</span> <span class="nf">OnProjectLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">contents</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">():</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__contents_panel</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Detach</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>

        <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__AddContents</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__restore_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__backward_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__forward_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecoveryPanel.OnDataContentsChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.OnDataContentsChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnDataContentsChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetId</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="n">contents_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetContentsList</span><span class="p">()</span>
        <span class="n">index_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetIndexList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">index_list</span><span class="p">:</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">contents_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">contents</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecoveryPanel.Contents"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.Contents">[docs]</a>    <span class="k">class</span> <span class="nc">Contents</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">index</span>

            <span class="n">file_name</span> <span class="o">=</span> <span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetData</span><span class="p">()</span><span class="o">.</span><span class="n">Path</span><span class="p">)</span>
            <span class="n">file_name_lbl</span> <span class="o">=</span> <span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">file_name</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">TE_READONLY</span> <span class="o">|</span> <span class="n">BORDER_NONE</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__msg_ety</span> <span class="o">=</span> <span class="n">NormalEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">TE_MULTILINE</span> <span class="o">|</span> <span class="n">TE_READONLY</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_COMMAND_SCROLL_CHANGED</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnSliderShifted</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">file_name_lbl</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">TOP</span> <span class="o">|</span> <span class="n">RIGHT</span> <span class="o">|</span> <span class="n">LEFT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__msg_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">LEFT</span> <span class="o">|</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

<div class="viewcode-block" id="RecoveryPanel.Contents.GetDelta"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.Contents.GetDelta">[docs]</a>        <span class="k">def</span> <span class="nf">GetDelta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecoveryPanel.Contents.TimeShift"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.Contents.TimeShift">[docs]</a>        <span class="k">def</span> <span class="nf">TimeShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
            <span class="n">buffer_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetBufferSize</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">buffer_size</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">prev_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
            <span class="n">next_pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">prev_pos</span> <span class="o">-</span> <span class="n">delta</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">buffer_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">next_pos</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateMsg</span><span class="p">()</span></div>

<div class="viewcode-block" id="RecoveryPanel.Contents.Update"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.RecoveryPanel.Contents.Update">[docs]</a>        <span class="k">def</span> <span class="nf">Update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateSlider</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateMsg</span><span class="p">()</span></div>

        <span class="k">def</span> <span class="nf">__UpdateSlider</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">buffer_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetBufferSize</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">buffer_size</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Max</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Value</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">ShowItems</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Max</span> <span class="o">=</span> <span class="n">buffer_size</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Value</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">ShowItems</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">buffer_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">__slider_tick_h_sizer</span><span class="o">.</span><span class="n">ShowItems</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">__UpdateMsg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetBufferSize</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetSelectedBuffer</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__msg_ety</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">__OnSliderShifted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateMsg</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">OnSliderShifted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__index</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">__GetData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GrandParent</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__index</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">__GetSelectedBuffer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetData</span><span class="p">()</span><span class="o">.</span><span class="n">GetBufferData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__slider</span><span class="o">.</span><span class="n">GetValue</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">__GetBufferSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetData</span><span class="p">()</span><span class="o">.</span><span class="n">BufferSize</span></div></div>


<div class="viewcode-block" id="MappingViewer"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer">[docs]</a><span class="k">class</span> <span class="nc">MappingViewer</span><span class="p">(</span><span class="n">PanelBase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Panel for displaying mappings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">LEFT</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">RIGHT</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__e_pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span> <span class="o">=</span> <span class="n">LabeledValidateEntry</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">IntContainer</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CHAR_HOOK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnTableSizeChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span> <span class="o">=</span> <span class="n">LabeledValidateEntry</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">IntContainer</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CHAR_HOOK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnTableSizeChanged</span><span class="p">)</span>
        <span class="n">ctrl_l_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">ctrl_l_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="n">ctrl_l_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

        <span class="n">choices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MAPPING_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDirectionList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dir_ety</span> <span class="o">=</span> <span class="n">LabeledValidateEntry</span><span class="p">(</span><span class="s1">&#39;Direction&#39;</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="s1">&#39;r2d&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="p">),</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_COMBOBOX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnDirectionSelected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span> <span class="o">=</span> <span class="n">ColormapEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_COMBOBOX</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnColormapSelected</span><span class="p">)</span>
        <span class="n">ctrl_r_v_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">ctrl_r_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dir_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="n">ctrl_r_v_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

        <span class="n">table_h_sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">table_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ctrl_l_v_sizer</span><span class="p">)</span>
        <span class="n">table_h_sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">table_h_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
        <span class="n">table_h_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">ctrl_r_v_sizer</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span> <span class="o">=</span> <span class="n">FunctionListEntry</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_CHAR_HOOK</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnCharHook</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span> <span class="o">=</span> <span class="n">ExecuteButton</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnExecuteBtnPushed</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">header_sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">header_sizer</span><span class="o">.</span><span class="n">AddStretchSpacer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">header_sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">header_sizer</span><span class="o">.</span><span class="n">AddSpacer</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span> <span class="o">=</span> <span class="n">FigureCanvasWxAgg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">MinSize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnMotion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnBtnPress</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s1">&#39;button_release_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__OnBtnRelease</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__rect_selector</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rect_selector</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__nav_toolbar</span> <span class="o">=</span> <span class="n">NavigationToolbar2WxAgg</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span> <span class="o">=</span> <span class="n">BoxSizer</span><span class="p">(</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">table_h_sizer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span> <span class="o">|</span> <span class="n">ALL</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">NormalLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Sizer</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__nav_toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">EXPAND</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__SetTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;(x, y, i)=(</span><span class="si">{</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fontsize&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;gray&#39;</span><span class="p">},</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetTableSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span><span class="o">.</span><span class="n">GetValue</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dir_ety</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetColormap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span><span class="o">.</span><span class="n">GetColormap</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__Select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">c_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertOuter</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">previous_selection</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_selected_index</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_selected_index_list</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span> <span class="o">=</span> <span class="n">c_i</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__spot_selected_pos_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">c_i</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__range_selected_pos_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update_all_colors</span><span class="p">()</span>

        <span class="n">current_selection</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_selected_index</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_selected_index_list</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_data_selection_changed</span><span class="p">(</span><span class="n">current_selection</span><span class="p">,</span> <span class="n">previous_selection</span><span class="p">)</span>

<div class="viewcode-block" id="MappingViewer.OnMappingFunctionRegister"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnMappingFunctionRegister">[docs]</a>    <span class="k">def</span> <span class="nf">OnMappingFunctionRegister</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">RegisterFunctionList</span><span class="p">(</span><span class="n">func_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingViewer.OnMappingFunctionSelect"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnMappingFunctionSelect">[docs]</a>    <span class="k">def</span> <span class="nf">OnMappingFunctionSelect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Layout</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__OnTableSizeChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span><span class="o">.</span><span class="n">HasValidValue</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span><span class="o">.</span><span class="n">HasValidValue</span><span class="p">()):</span>
            <span class="k">return</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataSize</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MAPPING_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SetTableSize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnDirectionSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDirection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MAPPING_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SelectDirection</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnColormapSelected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span><span class="o">.</span><span class="n">GetColormap</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MAPPING_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SelectColormap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertOuter</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnMotion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsNormal</span><span class="p">()</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">]):</span>
            <span class="k">return</span>

        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetIndex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__SetTitle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span> <span class="o">=</span> <span class="n">idx</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsPressed</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__OnDrag</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnBtnPress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsNormal</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="n">MappingViewer</span><span class="o">.</span><span class="n">LEFT</span><span class="p">:</span>
            <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">]):</span>
                <span class="k">return</span>

            <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">):</span>
                <span class="k">return</span>

            <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetIndex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__SetTitle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__rect_selector</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span> <span class="o">=</span> <span class="n">idx</span>

    <span class="k">def</span> <span class="nf">__OnDrag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsPressed</span><span class="p">()</span> <span class="ow">or</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">]):</span>
            <span class="k">return</span>

        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">c</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="n">l</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rect_selector</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnBtnRelease</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsNormal</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="n">MappingViewer</span><span class="o">.</span><span class="n">LEFT</span><span class="p">:</span>
            <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="p">(</span><span class="n">data</span> <span class="o">:=</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span><span class="p">]):</span>
                <span class="k">return</span>

            <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">c</span><span class="p">)),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">r</span><span class="p">))</span>
            <span class="n">e_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertOuter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetIndex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="s1">&#39;r2d&#39;</span><span class="p">)</span>
            <span class="n">s_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertOuter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;r2d&#39;</span><span class="p">)</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetRectSelection</span><span class="p">(</span><span class="n">s_i</span><span class="p">,</span> <span class="n">e_i</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">selection</span><span class="o">=</span><span class="n">selection</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__prev_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rect_selector</span><span class="o">.</span><span class="n">set_bounds</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetRectSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r2d_i</span><span class="p">,</span> <span class="n">r2d_j</span><span class="p">):</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="p">(</span><span class="n">r2d_i</span> <span class="o">%</span> <span class="n">c</span><span class="p">,</span> <span class="n">r2d_j</span> <span class="o">%</span> <span class="n">c</span><span class="p">),</span> <span class="p">(</span><span class="n">r2d_i</span> <span class="o">//</span> <span class="n">c</span><span class="p">,</span> <span class="n">r2d_j</span> <span class="o">//</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xs</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xs</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">ys</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">selection</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">selection</span>

    <span class="k">def</span> <span class="nf">__ConvertOuter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r2d_i</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDirection</span><span class="p">()</span>

        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">r2d_i</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;l2d&#39;</span><span class="p">,</span> <span class="s1">&#39;d2l&#39;</span><span class="p">,</span> <span class="s1">&#39;l2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2l&#39;</span><span class="p">]:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">x</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;r2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2r&#39;</span><span class="p">,</span> <span class="s1">&#39;l2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2l&#39;</span><span class="p">]:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">y</span>

        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;d2r&#39;</span><span class="p">,</span> <span class="s1">&#39;d2l&#39;</span><span class="p">,</span> <span class="s1">&#39;u2r&#39;</span><span class="p">,</span> <span class="s1">&#39;u2l&#39;</span><span class="p">]:</span>
            <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
            <span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="p">,</span> <span class="n">r</span>

        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ConvertInner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDirection</span><span class="p">()</span>

        <span class="n">c</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;r2d&#39;</span><span class="p">,</span> <span class="s1">&#39;l2d&#39;</span><span class="p">,</span> <span class="s1">&#39;r2u&#39;</span><span class="p">,</span> <span class="s1">&#39;l2u&#39;</span><span class="p">]:</span>
            <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;l2d&#39;</span><span class="p">,</span> <span class="s1">&#39;d2l&#39;</span><span class="p">,</span> <span class="s1">&#39;l2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2l&#39;</span><span class="p">]:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">x</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;r2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2r&#39;</span><span class="p">,</span> <span class="s1">&#39;l2u&#39;</span><span class="p">,</span> <span class="s1">&#39;u2l&#39;</span><span class="p">]:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">y</span>

        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">c</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ConvertDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataSize</span><span class="p">()</span>
        <span class="n">index_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__ConvertInner</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data_size</span><span class="p">)]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">(</span><span class="n">index_list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__CreateQuadMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">value_list</span><span class="p">,</span> <span class="n">cmap</span><span class="p">):</span>
        <span class="n">coordinate</span> <span class="o">=</span> <span class="n">array</span><span class="p">([[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">get_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>

        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">value_list</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isclose</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="p">):</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">cmap</span><span class="o">.</span><span class="n">badcolor</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">cmap</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">N</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">vmax</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">)))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value_list</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">QuadMesh</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">facecolors</span><span class="o">=</span><span class="n">color_list</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">antialiased</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__OnExecuteBtnPushed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__func_list_ety</span><span class="o">.</span><span class="n">GetSelectedFunction</span><span class="p">()</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertDataList</span><span class="p">()</span>
        <span class="n">value_list</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">Execution</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetColormap</span><span class="p">()</span>
        <span class="n">quadmesh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__CreateQuadMesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">value_list</span><span class="p">,</span> <span class="n">cmap</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">add_collection</span><span class="p">(</span><span class="n">quadmesh</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__OnCharHook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateCtrl</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__IsPressed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_pos</span> <span class="o">!=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__IsActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__nav_toolbar</span><span class="o">.</span><span class="n">GetToolState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__nav_toolbar</span><span class="o">.</span><span class="n">wx_ids</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__IsNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsActive</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__nav_toolbar</span><span class="o">.</span><span class="n">wx_ids</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__UpdateCtrl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataSize</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__canvas</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span>

<div class="viewcode-block" id="MappingViewer.OnProjectLoad"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnProjectLoad">[docs]</a>    <span class="k">def</span> <span class="nf">OnProjectLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__UpdateCtrl</span><span class="p">()</span></div>

<div class="viewcode-block" id="MappingViewer.OnTableSizeChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnTableSizeChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnTableSizeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetTableSize</span><span class="p">()</span>
        <span class="n">prev_x</span><span class="p">,</span> <span class="n">prev_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetTableSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">prev_x</span> <span class="o">==</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">prev_y</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__x_ety</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__y_ety</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDataSize</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Enable</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__exe_btn</span><span class="o">.</span><span class="n">Disable</span><span class="p">()</span></div>

<div class="viewcode-block" id="MappingViewer.OnDirectionChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnDirectionChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnDirectionChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDirection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dir_ety</span><span class="o">.</span><span class="n">Value</span> <span class="o">=</span> <span class="n">direction</span></div>

<div class="viewcode-block" id="MappingViewer.OnColormapChange"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.OnColormapChange">[docs]</a>    <span class="k">def</span> <span class="nf">OnColormapChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetColormap</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cmap_ety</span><span class="o">.</span><span class="n">SetColormap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingViewer.NeedDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.NeedDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="MappingViewer.NeedMultiDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.NeedMultiDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedMultiDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="MappingViewer.NeedPeaksDraw"><a class="viewcode-back" href="../../isatex.html#isatex.defaultpanel.MappingViewer.NeedPeaksDraw">[docs]</a>    <span class="k">def</span> <span class="nf">NeedPeaksDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span></div></div>

<span class="c1"># class ColormapSelector(PanelBase):</span>
<span class="c1">#     def __init__(self, *args, **kw):</span>
<span class="c1">#         super().__init__(*args, **kw)</span>
<span class="c1">#         self.__colorbar = Colorbar(parent=self)</span>

<span class="c1">#         self.__contents_panel = ScrolledPanel(self)</span>
<span class="c1">#         self.__contents_panel.Sizer = BoxSizer(VERTICAL)</span>

<span class="c1">#         self.__add_btn = AddButton(self)</span>
<span class="c1">#         self.__add_btn.Bind(EVT_BUTTON, lambda _: self.__OnAddBtnPushed())</span>

<span class="c1">#         self.Sizer = BoxSizer(VERTICAL)</span>
<span class="c1">#         self.Sizer.Add(self.__colorbar, 0, EXPAND | ALL, 10)</span>
<span class="c1">#         self.Sizer.Add(NormalLine(self, size=(-1, 2)), 0, EXPAND)</span>
<span class="c1">#         self.Sizer.Add(self.__contents_panel, 1, EXPAND | ALL, 10)</span>
<span class="c1">#         self.Sizer.Add(self.__add_btn, 0, CENTER | ALL, 10)</span>

<span class="c1">#         self.__contents_panel.SetupScrolling()</span>

<span class="c1">#     def __GetCmap(self):</span>
<span class="c1">#         colors, positions = self.__GetColors(), self.__GetPositions()</span>
<span class="c1">#         return self.__CreateCmap(colors, positions)</span>

<span class="c1">#     def __CreateCmap(self, colors, positions):</span>
<span class="c1">#         if len(colors) != len(positions):</span>
<span class="c1">#             return</span>

<span class="c1">#         color_dict = {&#39;red&#39;: [], &#39;green&#39;: [], &#39;blue&#39;: [], &#39;alpha&#39;: []}</span>
<span class="c1">#         if 0 not in positions:</span>
<span class="c1">#             color_dict[&#39;red&#39;].append([0, 1, 1])</span>
<span class="c1">#             color_dict[&#39;blue&#39;].append([0, 1, 1])</span>
<span class="c1">#             color_dict[&#39;green&#39;].append([0, 1, 1])</span>
<span class="c1">#             color_dict[&#39;alpha&#39;].append([0, 0, 0])</span>

<span class="c1">#         for color, pos in zip(colors, positions):</span>
<span class="c1">#             red, green, blue, alpha = color</span>
<span class="c1">#             if pos not in [value[0] for value in color_dict[&#39;red&#39;]]:</span>
<span class="c1">#                 color_dict[&#39;red&#39;].append([pos, red, red])</span>
<span class="c1">#                 color_dict[&#39;blue&#39;].append([pos, blue, blue])</span>
<span class="c1">#                 color_dict[&#39;green&#39;].append([pos, green, green])</span>
<span class="c1">#                 color_dict[&#39;alpha&#39;].append([pos, alpha, alpha])</span>

<span class="c1">#         if 1 not in positions:</span>
<span class="c1">#             color_dict[&#39;red&#39;].append([1, 1, 1])</span>
<span class="c1">#             color_dict[&#39;blue&#39;].append([1, 1, 1])</span>
<span class="c1">#             color_dict[&#39;green&#39;].append([1, 1, 1])</span>
<span class="c1">#             color_dict[&#39;alpha&#39;].append([1, 0, 0])</span>

<span class="c1">#         return LinearSegmentedColormap(&#39;custom&#39;, color_dict)</span>

<span class="c1">#     def __GetColors(self):</span>
<span class="c1">#         return [contents.GetColor() for contents in self.__GetContentsList()]</span>

<span class="c1">#     def __GetPositions(self):</span>
<span class="c1">#         return [contents.GetPosition() for contents in self.__GetContentsList()]</span>

<span class="c1">#     def __GetContentsList(self):</span>
<span class="c1">#         return [item_sizer.Window for item_sizer in self.__contents_panel.Sizer]</span>

<span class="c1">#     def __ClearContentsList(self):</span>
<span class="c1">#         for contents in self.__GetContentsList():</span>
<span class="c1">#             contents.Hide()</span>
<span class="c1">#             self.__contents_panel.Sizer.Detach(contents)</span>
<span class="c1">#             contents.Destroy()</span>

<span class="c1">#     def __OnAddBtnPushed(self):</span>
<span class="c1">#         contents = ColormapSelector.Contents(&#39;#FFF&#39;, parent=self.__contents_panel)</span>
<span class="c1">#         contents.Bind(EVT_CLOSE, self.__OnContentsClose)</span>

<span class="c1">#         self.__contents_panel.Sizer.Add(contents, 0, EXPAND)</span>
<span class="c1">#         self.__contents_panel.SetupScrolling(scrollToTop=False)</span>
<span class="c1">#         self.__contents_panel.ScrollChildIntoView(contents)</span>
<span class="c1">#         self.Layout()</span>

<span class="c1">#         self._OnCmapChanged()</span>

<span class="c1">#     def __OnContentsClose(self, event):</span>
<span class="c1">#         event.Skip()</span>
<span class="c1">#         contents = event.GetEventObject()</span>
<span class="c1">#         contents.Hide()</span>
<span class="c1">#         self.__contents_panel.Sizer.Detach(contents)</span>
<span class="c1">#         contents.Destroy()</span>

<span class="c1">#         self.__contents_panel.SetupScrolling(scrollToTop=False)</span>
<span class="c1">#         self.Layout()</span>

<span class="c1">#         self._OnCmapChanged()</span>

<span class="c1">#     def _OnCmapChanged(self):</span>
<span class="c1">#         cmap = self.__GetCmap()</span>
<span class="c1">#         self.__colorbar.SetCmap(cmap)</span>

<span class="c1">#         self.Get(COLOR_MANAGER).SetColormap(cmap)</span>

<span class="c1">#     def OnColormapChange(self, event):</span>
<span class="c1">#         cmap = event.GetColormap()</span>
<span class="c1">#         self.__colorbar.SetCmap(cmap)</span>

<span class="c1">#         self.__ClearContentsList()</span>
<span class="c1">#         colors, positions = cmap.GetColorsPositions()</span>
<span class="c1">#         for color, position in zip(colors, positions):</span>
<span class="c1">#             contents = ColormapSelector.Contents(color, parent=self.__contents_panel)</span>
<span class="c1">#             contents.SetPosition(position)</span>
<span class="c1">#             contents.Bind(EVT_CLOSE, self.__OnContentsClose)</span>

<span class="c1">#             self.__contents_panel.Sizer.Add(contents, 0, EXPAND)</span>

<span class="c1">#         self.__contents_panel.SetupScrolling(scrollToTop=False)</span>
<span class="c1">#         self.Layout()</span>

<span class="c1">#     class Contents(ColorSliderCtrl):</span>
<span class="c1">#         def OnColorChange(self):</span>
<span class="c1">#             self.GrandParent._OnCmapChanged()</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;DataSelector&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SpectrumPanel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PeakSelector&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FunctionSelector&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PresetSelector&#39;</span><span class="p">,</span>
    <span class="s1">&#39;RecipePanel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ExecutePanel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;RecoveryPanel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MappingViewer&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ryo Tandai.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>