

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>isatex.manager &mdash; iSATex 0.0.5 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> iSATex
          

          
          </a>

          
            
            
              <div class="version">
                0.0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">iSATex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">isatex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../history.html">History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">iSATex</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>isatex.manager</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for isatex.manager</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">import_module</span>
<span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getmembers</span><span class="p">,</span> <span class="n">isclass</span><span class="p">,</span> <span class="n">isfunction</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">JSONEncoder</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">load</span><span class="p">,</span> <span class="n">loads</span>
<span class="kn">from</span> <span class="nn">json.decoder</span> <span class="kn">import</span> <span class="n">JSONDecodeError</span>
<span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">DEBUG</span><span class="p">,</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span><span class="p">,</span> <span class="n">mkdir</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span><span class="p">,</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">exists</span><span class="p">,</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>
<span class="kn">from</span> <span class="nn">zlib</span> <span class="kn">import</span> <span class="n">compress</span><span class="p">,</span> <span class="n">decompress</span>

<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">Colormap</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="kn">import</span> <span class="n">Line2D</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">inf</span><span class="p">,</span> <span class="n">ndarray</span>
<span class="kn">from</span> <span class="nn">wx</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CANCEL</span><span class="p">,</span> <span class="n">CENTRE</span><span class="p">,</span> <span class="n">ICON_INFORMATION</span><span class="p">,</span> <span class="n">ID_CANCEL</span><span class="p">,</span> <span class="n">ID_CLOSE</span><span class="p">,</span>
                <span class="n">ITEM_NORMAL</span><span class="p">,</span> <span class="n">NOT_FOUND</span><span class="p">,</span> <span class="n">OK</span><span class="p">,</span> <span class="n">LogError</span><span class="p">,</span> <span class="n">Menu</span><span class="p">,</span> <span class="n">MenuBar</span><span class="p">,</span> <span class="n">MenuItem</span><span class="p">,</span>
                <span class="n">MessageDialog</span><span class="p">,</span> <span class="n">NewIdRef</span><span class="p">,</span> <span class="n">Window</span><span class="p">,</span> <span class="n">wxEVT_COMMAND_MENU_SELECTED</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">wx.lib.agw.aui.framemanager</span> <span class="kn">import</span> <span class="p">(</span><span class="n">AUI_BUTTON_CLOSE</span><span class="p">,</span>
                                         <span class="n">AUI_MGR_ALLOW_ACTIVE_PANE</span><span class="p">,</span>
                                         <span class="n">AUI_MGR_ALLOW_FLOATING</span><span class="p">,</span>
                                         <span class="n">AUI_MGR_LIVE_RESIZE</span><span class="p">,</span>
                                         <span class="n">AUI_MGR_TRANSPARENT_DRAG</span><span class="p">,</span> <span class="n">AuiManager</span><span class="p">,</span>
                                         <span class="n">AuiPaneInfo</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ABOUT_MENU_ITEM</span><span class="p">,</span> <span class="n">COLOR</span><span class="p">,</span> <span class="n">COLOR_THEME</span><span class="p">,</span>
                   <span class="n">COLOR_THEME_FOLDER_PATH</span><span class="p">,</span> <span class="n">COLOR_THEME_LIST</span><span class="p">,</span> <span class="n">COLORMAP</span><span class="p">,</span> <span class="n">CUSTOM</span><span class="p">,</span>
                   <span class="n">DATA_BUFFER_SIZE</span><span class="p">,</span> <span class="n">DATA_MANAGER</span><span class="p">,</span> <span class="n">DECODE</span><span class="p">,</span> <span class="n">DECODE_ENCODING</span><span class="p">,</span>
                   <span class="n">DECODE_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">DEFAULT</span><span class="p">,</span> <span class="n">DEFAULT_COLOR_THEME</span><span class="p">,</span>
                   <span class="n">DEFAULT_COLORMAP</span><span class="p">,</span> <span class="n">DELIMITER</span><span class="p">,</span> <span class="n">DIRECTION</span><span class="p">,</span> <span class="n">EDIT_MENU</span><span class="p">,</span> <span class="n">ENCODE</span><span class="p">,</span>
                   <span class="n">ENCODE_DELIMITER</span><span class="p">,</span> <span class="n">ENCODE_ENCODING</span><span class="p">,</span>
                   <span class="n">ENCODE_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">ENCODING</span><span class="p">,</span> <span class="n">ERROR_COLOR</span><span class="p">,</span>
                   <span class="n">EVENT_LIST</span><span class="p">,</span> <span class="n">EVENT_MANAGER</span><span class="p">,</span> <span class="n">EVENT_RECEPTOR_CLASS_LIST</span><span class="p">,</span>
                   <span class="n">EXIT_MENU_ITEM</span><span class="p">,</span> <span class="n">EXPORT_MENU_ITEM</span><span class="p">,</span> <span class="n">EXPORT_PLUGIN_MENU_ITEM</span><span class="p">,</span>
                   <span class="n">FILE_MENU</span><span class="p">,</span> <span class="n">FUNCTION</span><span class="p">,</span> <span class="n">FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">FUNCTION_MANAGER</span><span class="p">,</span>
                   <span class="n">HELP_MENU</span><span class="p">,</span> <span class="n">ID_SAVE</span><span class="p">,</span> <span class="n">IMPORT_PLUGIN_MENU_ITEM</span><span class="p">,</span> <span class="n">LAYOUT</span><span class="p">,</span>
                   <span class="n">LAYOUT_MENU</span><span class="p">,</span> <span class="n">LIST</span><span class="p">,</span> <span class="n">MAIN_SELECTION_COLOR</span><span class="p">,</span> <span class="n">MAIN_WINDOW</span><span class="p">,</span>
                   <span class="n">MANAGER_LIST</span><span class="p">,</span> <span class="n">MAPPING</span><span class="p">,</span> <span class="n">MAPPING_COLORMAP</span><span class="p">,</span> <span class="n">MAPPING_DIRECTION</span><span class="p">,</span>
                   <span class="n">MAPPING_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">MAPPING_TABLE_SIZE</span><span class="p">,</span>
                   <span class="n">MAX_DATA_BUFFER_SIZE</span><span class="p">,</span> <span class="n">MENU_ITEM_LIST</span><span class="p">,</span> <span class="n">MENUBAR_MANAGER</span><span class="p">,</span> <span class="n">NAME</span><span class="p">,</span>
                   <span class="n">NEW_MENU_ITEM</span><span class="p">,</span> <span class="n">OPEN_MENU_ITEM</span><span class="p">,</span> <span class="n">PANEL_CLASS_LIST</span><span class="p">,</span>
                   <span class="n">PANEL_MANAGER</span><span class="p">,</span> <span class="n">PEAK_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">PEAK_MANAGER</span><span class="p">,</span>
                   <span class="n">PEAK_MENU</span><span class="p">,</span> <span class="n">PEAK_TYPE</span><span class="p">,</span> <span class="n">PERSPECTIVE_SETTING</span><span class="p">,</span>
                   <span class="n">PLUGIN_FOLDER_PATH</span><span class="p">,</span> <span class="n">PLUGIN_MENU</span><span class="p">,</span> <span class="n">PREFERENCE_MENU_ITEM</span><span class="p">,</span>
                   <span class="n">PRESET_LIST</span><span class="p">,</span> <span class="n">PROJECT_MANAGER</span><span class="p">,</span> <span class="n">PROJECT_MEMO_MENU_ITEM</span><span class="p">,</span>
                   <span class="n">PROJECT_MENU</span><span class="p">,</span> <span class="n">SAVE_AS_MENU_ITEM</span><span class="p">,</span> <span class="n">SAVE_ENCODING</span><span class="p">,</span>
                   <span class="n">SAVE_MENU_ITEM</span><span class="p">,</span> <span class="n">SELECTED</span><span class="p">,</span> <span class="n">SELECTED_DECODE_FUNCTION</span><span class="p">,</span>
                   <span class="n">SELECTED_ENCODE_FUNCTION</span><span class="p">,</span> <span class="n">SELECTED_LAYOUT</span><span class="p">,</span>
                   <span class="n">SELECTED_MAPPING_FUNCTION</span><span class="p">,</span> <span class="n">SELECTION_COLOR</span><span class="p">,</span> <span class="n">SEPARATOR</span><span class="p">,</span>
                   <span class="n">SETTING_FILE_PATH</span><span class="p">,</span> <span class="n">SETTING_STORABLE_OBJECT_CLASS_LIST</span><span class="p">,</span> <span class="n">SHOW</span><span class="p">,</span>
                   <span class="n">SHOW_PANEL_MENU</span><span class="p">,</span> <span class="n">SPECTRUM</span><span class="p">,</span> <span class="n">SPECTRUM_FUNCTION_CLASS_LIST</span><span class="p">,</span>
                   <span class="n">SPECTRUM_FUNCTION_PRESET_LIST</span><span class="p">,</span> <span class="n">SPECTRUM_LAYOUT</span><span class="p">,</span>
                   <span class="n">SPECTRUM_PANEL</span><span class="p">,</span> <span class="n">STORABLE_OBJECT_DICT</span><span class="p">,</span> <span class="n">SUCCESS_COLOR</span><span class="p">,</span>
                   <span class="n">TABLE_SIZE</span><span class="p">,</span> <span class="n">TEMPORARY</span><span class="p">,</span> <span class="n">TUTORIAL_MENU_ITEM</span><span class="p">,</span> <span class="n">UNKNOWN</span><span class="p">,</span>
                   <span class="n">VIEW_MENU</span><span class="p">,</span> <span class="n">WINDOW_SIZE</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.container</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CustomCheckMenuItemBase</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">,</span>
                       <span class="n">CustomNormalMenuItemBase</span><span class="p">,</span> <span class="n">CustomRadioMenuItemBase</span><span class="p">,</span>
                       <span class="n">EventReceptorBase</span><span class="p">,</span> <span class="n">LayoutMenuItem</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">,</span>
                       <span class="n">PeakMenuItem</span><span class="p">,</span> <span class="n">ShowPanelMenuItem</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.control</span> <span class="kn">import</span> <span class="n">SaveCheckDialog</span>
<span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">CommunicableObjectBase</span><span class="p">,</span> <span class="n">RestrictedStorableListBase</span><span class="p">,</span>
                  <span class="n">SettingStorableObjectBase</span><span class="p">,</span> <span class="n">StorableObject</span><span class="p">,</span> <span class="n">iSATexObject</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.defaultevent</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ColormapChangeEvent</span><span class="p">,</span> <span class="n">ColorRegisterEvent</span><span class="p">,</span>
                          <span class="n">ColorSelectionEvent</span><span class="p">,</span> <span class="n">DataContentsChangeEvent</span><span class="p">,</span>
                          <span class="n">DataSelectionChangeEvent</span><span class="p">,</span> <span class="n">DecodeEvent</span><span class="p">,</span>
                          <span class="n">DecodeFunctionDeregisterEvent</span><span class="p">,</span>
                          <span class="n">DecodeFunctionRegisterEvent</span><span class="p">,</span>
                          <span class="n">DecodeFunctionSelectEvent</span><span class="p">,</span> <span class="n">DirectionChangeEvent</span><span class="p">,</span>
                          <span class="n">EncodeEvent</span><span class="p">,</span> <span class="n">EncodeFunctionDeregisterEvent</span><span class="p">,</span>
                          <span class="n">EncodeFunctionRegisterEvent</span><span class="p">,</span>
                          <span class="n">EncodeFunctionSelectEvent</span><span class="p">,</span> <span class="n">LayoutChangeEvent</span><span class="p">,</span>
                          <span class="n">LayoutRegisterEvent</span><span class="p">,</span> <span class="n">MappingFunctionDeregisterEvent</span><span class="p">,</span>
                          <span class="n">MappingFunctionRegisterEvent</span><span class="p">,</span>
                          <span class="n">MappingFunctionSelectEvent</span><span class="p">,</span> <span class="n">PanelRegisterEvent</span><span class="p">,</span>
                          <span class="n">PanelSelectionChangeEvent</span><span class="p">,</span> <span class="n">PanelViewEvent</span><span class="p">,</span>
                          <span class="n">PeakFunctionDeregisterEvent</span><span class="p">,</span>
                          <span class="n">PeakFunctionRegisterEvent</span><span class="p">,</span> <span class="n">PeakTypeChangeEvent</span><span class="p">,</span>
                          <span class="n">PeakTypeRegisterEvent</span><span class="p">,</span> <span class="n">PreferenceEvent</span><span class="p">,</span>
                          <span class="n">PresetDeregisterEvent</span><span class="p">,</span> <span class="n">PresetRegisterEvent</span><span class="p">,</span>
                          <span class="n">ProjectMemoChangeEvent</span><span class="p">,</span> <span class="n">ProjectNewEvent</span><span class="p">,</span>
                          <span class="n">ProjectOpenEvent</span><span class="p">,</span> <span class="n">ProjectSaveEvent</span><span class="p">,</span>
                          <span class="n">RecipeSelectEvent</span><span class="p">,</span> <span class="n">SpectrumFunctionDeregisterEvent</span><span class="p">,</span>
                          <span class="n">SpectrumFunctionListSelectEvent</span><span class="p">,</span>
                          <span class="n">SpectrumFunctionRegisterEvent</span><span class="p">,</span> <span class="n">TableSizeChangeEvent</span><span class="p">,</span>
                          <span class="n">iSATexEvent</span><span class="p">,</span> <span class="n">iSATexEventBinder</span><span class="p">,</span> <span class="n">wxEVT_COLOR_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_COLOR_SELECT</span><span class="p">,</span> <span class="n">wxEVT_COLORMAP_CHANGE</span><span class="p">,</span>
                          <span class="n">wxEVT_DATA_CONTENTS_CHANGE</span><span class="p">,</span>
                          <span class="n">wxEVT_DATA_SELECTION_CHANGE</span><span class="p">,</span> <span class="n">wxEVT_DECODE</span><span class="p">,</span>
                          <span class="n">wxEVT_DECODE_FUNCTION_DEREGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_DECODE_FUNCTION_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_DECODE_FUNCTION_SELECT</span><span class="p">,</span> <span class="n">wxEVT_DIRECTION_CHANGE</span><span class="p">,</span>
                          <span class="n">wxEVT_ENCODE</span><span class="p">,</span> <span class="n">wxEVT_ENCODE_FUNCTION_DEREGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_ENCODE_FUNCTION_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_ENCODE_FUNCTION_SELECT</span><span class="p">,</span> <span class="n">wxEVT_EXIT</span><span class="p">,</span>
                          <span class="n">wxEVT_LAUNCH</span><span class="p">,</span> <span class="n">wxEVT_LAYOUT_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_MAPPING_FUNCTION_DEREGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_MAPPING_FUNCTION_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_PANEL_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_PANEL_SELECTION_CHANGE</span><span class="p">,</span>
                          <span class="n">wxEVT_PANEL_VIEW</span><span class="p">,</span> <span class="n">wxEVT_PEAK_FUNCTION_DEREGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_PEAK_FUNCTION_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_PEAK_TYPE_CHANGE</span><span class="p">,</span>
                          <span class="n">wxEVT_PEAK_TYPE_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_PREFERENCE</span><span class="p">,</span>
                          <span class="n">wxEVT_PRESET_DEREGISTER</span><span class="p">,</span> <span class="n">wxEVT_PRESET_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_PROJECT_MEMO_CHANGE</span><span class="p">,</span> <span class="n">wxEVT_PROJECT_NEW</span><span class="p">,</span>
                          <span class="n">wxEVT_PROJECT_OPEN</span><span class="p">,</span> <span class="n">wxEVT_PROJECT_SAVE</span><span class="p">,</span>
                          <span class="n">wxEVT_RECIPE_SELECT</span><span class="p">,</span>
                          <span class="n">wxEVT_SPECTRUM_FUNCTION_DEREGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_SPECTRUM_FUNCTION_LIST_SELECT</span><span class="p">,</span>
                          <span class="n">wxEVT_SPECTRUM_FUNCTION_REGISTER</span><span class="p">,</span>
                          <span class="n">wxEVT_TABLE_SIZE_CHANGE</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.defaultpanel</span> <span class="kn">import</span> <span class="n">SpectrumPanel</span>
<span class="kn">from</span> <span class="nn">.objects</span> <span class="kn">import</span> <span class="p">(</span><span class="n">DEFAULT_BUFFER_SIZE</span><span class="p">,</span> <span class="n">DEFAULT_DECODE_FUNCTION</span><span class="p">,</span>
                     <span class="n">DEFAULT_DIRECTION_CONTAINER</span><span class="p">,</span> <span class="n">DEFAULT_ENCODE_FUNCTION</span><span class="p">,</span>
                     <span class="n">DEFAULT_MAPPING_FUNCTION</span><span class="p">,</span> <span class="n">DEFAULT_PEAK_TYPE</span><span class="p">,</span>
                     <span class="n">NEW_PROJECT_NAME</span><span class="p">,</span> <span class="n">ArgumentContainerBase</span><span class="p">,</span>
                     <span class="n">BoundedArgumentContainerBase</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">,</span>
                     <span class="n">DataContainer</span><span class="p">,</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">,</span>
                     <span class="n">EncodeFunctionContainerBase</span><span class="p">,</span> <span class="n">FunctionContainerBase</span><span class="p">,</span>
                     <span class="n">IntContainer</span><span class="p">,</span> <span class="n">MappingFunctionContainerBase</span><span class="p">,</span>
                     <span class="n">PeakFunctionContainerBase</span><span class="p">,</span> <span class="n">PeakFunctionContainerList</span><span class="p">,</span>
                     <span class="n">PeakType</span><span class="p">,</span> <span class="n">Preset</span><span class="p">,</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Recipe</span><span class="p">,</span> <span class="n">Spectrum</span><span class="p">,</span>
                     <span class="n">SpectrumFunctionContainerBase</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.util</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Camel2Pascal</span><span class="p">,</span> <span class="n">DotChain</span><span class="p">,</span> <span class="n">DotNotationDict</span><span class="p">,</span>
                  <span class="n">FindWindowToAncestors</span><span class="p">,</span> <span class="n">GetFileName</span><span class="p">,</span> <span class="n">GetShowPanelLabel</span><span class="p">,</span>
                  <span class="n">HasValidElement</span><span class="p">,</span> <span class="n">Singleton</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;__main__&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">DEBUG</span><span class="p">)</span>


<div class="viewcode-block" id="IOManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager">[docs]</a><span class="k">class</span> <span class="nc">IOManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class manages the external communication.</span>
<span class="sd">    The communication is mainly for configuring the application and loading and saving experimental data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SAVE_MARKER_CLASS_NAME</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;0__SAVE_CLASS_NAME__&#39;</span>
    <span class="n">SAVE_MARKER_DATA</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;1__SAVE_DATA__&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">core_mgr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>

<span class="sd">        :param setting_file_path: Path to a file to read the setting.</span>
<span class="sd">        :type setting_file_path: str</span>
<span class="sd">        :type core_mgr: CoreManager</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">core_mgr</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__setting_file_path</span> <span class="o">=</span> <span class="n">setting_file_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__used_setting</span> <span class="o">=</span> <span class="n">DotNotationDict</span><span class="p">()</span>

        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>

        <span class="n">default_path_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;isatex.objects.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.container.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultevent.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultpeakfunction.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultdecodefunction.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultencodefunction.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultspectrumfunction.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultmappingfunction.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultpanel.py&#39;</span><span class="p">,</span>
            <span class="s1">&#39;isatex.defaultmenuitem.py&#39;</span>
        <span class="p">]</span>
        <span class="n">exclude_class_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">iSATexObject</span><span class="p">,</span>
            <span class="n">CommunicableObjectBase</span><span class="p">,</span>
            <span class="n">StorableObject</span><span class="p">,</span>
            <span class="n">RestrictedStorableListBase</span><span class="p">,</span>
            <span class="n">EventReceptorBase</span><span class="p">,</span>
            <span class="n">ArgumentContainerBase</span><span class="p">,</span>
            <span class="n">BoundedArgumentContainerBase</span><span class="p">,</span>
            <span class="n">FunctionContainerBase</span><span class="p">,</span>
            <span class="n">SpectrumFunctionContainerBase</span><span class="p">,</span>
            <span class="n">DecodeFunctionContainerBase</span><span class="p">,</span>
            <span class="n">EncodeFunctionContainerBase</span><span class="p">,</span>
            <span class="n">PeakFunctionContainerBase</span><span class="p">,</span>
            <span class="n">MappingFunctionContainerBase</span><span class="p">,</span>
            <span class="n">PanelBase</span><span class="p">,</span>
            <span class="n">CustomMenuItemBase</span><span class="p">,</span>
            <span class="n">CustomNormalMenuItemBase</span><span class="p">,</span>
            <span class="n">CustomRadioMenuItemBase</span><span class="p">,</span>
            <span class="n">CustomCheckMenuItemBase</span><span class="p">,</span>
            <span class="n">ShowPanelMenuItem</span><span class="p">,</span>
            <span class="n">PeakMenuItem</span><span class="p">,</span>
            <span class="n">LayoutMenuItem</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">plugin_path_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPluginPathList</span><span class="p">()</span>
        <span class="n">iSATex_obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ImportObjectList</span><span class="p">(</span><span class="n">default_path_list</span> <span class="o">+</span> <span class="n">plugin_path_list</span><span class="p">,</span> <span class="n">iSATexObject</span><span class="p">,</span> <span class="n">exclude_class_list</span><span class="p">)</span>

        <span class="n">storable_object_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">Class</span><span class="p">()</span> <span class="k">for</span> <span class="n">Class</span> <span class="ow">in</span> <span class="n">iSATex_obj_list</span> <span class="k">if</span> <span class="n">isclass</span><span class="p">(</span><span class="n">Class</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">Class</span><span class="p">,</span> <span class="n">StorableObject</span><span class="p">)</span> <span class="ow">and</span> <span class="n">Class</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_class_list</span><span class="p">]</span>
        <span class="n">storable_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">storable_object</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="n">storable_object</span> <span class="k">for</span> <span class="n">storable_object</span> <span class="ow">in</span> <span class="n">storable_object_list</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span> <span class="o">=</span> <span class="n">DotNotationDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">STORABLE_OBJECT_DICT</span><span class="p">,</span> <span class="n">storable_dict</span><span class="p">)</span>

        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ImportSetting</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="n">setting_file_path</span><span class="p">))</span>

        <span class="n">class_import_design</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="p">(</span><span class="n">PeakFunctionContainerBase</span><span class="p">,</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">,</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">,</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">,</span> <span class="n">MappingFunctionContainerBase</span><span class="p">,),</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">PEAK_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">PeakFunctionContainerBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">DECODE_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">ENCODE_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">SPECTRUM_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">MAPPING_FUNCTION_CLASS_LIST</span><span class="p">,</span> <span class="n">MappingFunctionContainerBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">PANEL_CLASS_LIST</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">MENU_ITEM_LIST</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">EVENT_LIST</span><span class="p">,</span> <span class="n">iSATexEventBinder</span><span class="p">,</span> <span class="kc">True</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">EVENT_RECEPTOR_CLASS_LIST</span><span class="p">,</span> <span class="n">EventReceptorBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
            <span class="p">(</span><span class="n">SETTING_STORABLE_OBJECT_CLASS_LIST</span><span class="p">,</span> <span class="n">SettingStorableObjectBase</span><span class="p">,</span> <span class="kc">False</span><span class="p">,),</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">,</span> <span class="n">instanced</span> <span class="ow">in</span> <span class="n">class_import_design</span><span class="p">:</span>
            <span class="n">obj_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">iSATex_obj</span> <span class="ow">in</span> <span class="n">iSATex_obj_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">instanced</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iSATex_obj</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">):</span>
                        <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">isclass</span><span class="p">(</span><span class="n">iSATex_obj</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">iSATex_obj</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">)</span> <span class="ow">or</span> <span class="n">iSATex_obj</span> <span class="ow">in</span> <span class="n">exclude_class_list</span><span class="p">):</span>
                        <span class="k">continue</span>

                <span class="n">obj_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">iSATex_obj</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>

        <span class="n">color_theme_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetColorThemePathList</span><span class="p">():</span>
            <span class="n">color_theme_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ImportSetting</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">COLOR_THEME_LIST</span><span class="p">,</span> <span class="n">color_theme_list</span><span class="p">)</span>

<div class="viewcode-block" id="IOManager.GetSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.GetSetting">[docs]</a>    <span class="k">def</span> <span class="nf">GetSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function get the settings held by this class.</span>
<span class="sd">        The settings are classified into three types: &quot;SETTING&quot;, custom, and default.</span>
<span class="sd">        Note that the key is converted to prevent contamination of these settings.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :param default: The return value to be used when the specified key was not found., defaults to None</span>
<span class="sd">        :type default: Any type, optional</span>
<span class="sd">        :return: Value for the specified key. Or the Default value.</span>
<span class="sd">        :rtype: Any type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">key</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">default</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span><span class="p">()</span> <span class="k">if</span> <span class="n">isfunction</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">else</span> <span class="n">value</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsDefaultSetting</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">or</span> <span class="n">DotChain</span><span class="p">(</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">():</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">DotChain</span><span class="p">(</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">DotChain</span><span class="p">(</span><span class="n">CUSTOM</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__used_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>

<div class="viewcode-block" id="IOManager.SetSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.SetSetting">[docs]</a>    <span class="k">def</span> <span class="nf">SetSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            This function sets the value to the specified key.</span>
<span class="sd">            &quot;key&quot; is acceptable with DotNotation. For more information, see Documentation of &quot;DotNotationDict&quot; class.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :param value: Stored value.</span>
<span class="sd">        :type value: Any type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsDefaultSetting</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__used_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">CUSTOM</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__used_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">CUSTOM</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="IOManager.GetInitialSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.GetInitialSetting">[docs]</a>    <span class="k">def</span> <span class="nf">GetInitialSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns the initial value of the setting.</span>

<span class="sd">        :return: Initial value of the setting.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_initial_setting&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_initial_setting</span> <span class="o">=</span> <span class="n">DotNotationDict</span><span class="p">({</span>
                <span class="n">CUSTOM</span><span class="p">:</span> <span class="p">{},</span>
                <span class="n">DEFAULT</span><span class="p">:</span> <span class="p">{</span>
                    <span class="n">COLOR_THEME</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">SELECTED</span><span class="p">:</span> <span class="s2">&quot;Default Color&quot;</span><span class="p">,</span>
                        <span class="n">LIST</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="p">},</span>
                    <span class="n">DECODE</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">ENCODING</span><span class="p">:</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;shift_jis&#39;</span><span class="p">,</span> <span class="s1">&#39;euc_jp&#39;</span><span class="p">]),</span>
                    <span class="p">},</span>
                    <span class="n">ENCODE</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">ENCODING</span><span class="p">:</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;shift_jis&#39;</span><span class="p">,</span> <span class="s1">&#39;euc_jp&#39;</span><span class="p">]),</span>
                        <span class="n">DELIMITER</span><span class="p">:</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="s1">&#39;Comma[,]&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Colon[:]&#39;</span><span class="p">,</span> <span class="s1">&#39;Tab[</span><span class="se">\t</span><span class="s1">]&#39;</span><span class="p">,</span> <span class="s1">&#39;Space[ ]&#39;</span><span class="p">,</span> <span class="s1">&#39;Comma[,]&#39;</span><span class="p">,</span> <span class="s1">&#39;Equals Sign[=]&#39;</span><span class="p">,</span> <span class="s1">&#39;Semicolon[;]&#39;</span><span class="p">]),</span>
                    <span class="p">},</span>
                    <span class="n">MAPPING</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">DIRECTION</span><span class="p">:</span> <span class="n">DEFAULT_DIRECTION_CONTAINER</span><span class="p">,</span>
                        <span class="n">TABLE_SIZE</span><span class="p">:</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                        <span class="n">COLORMAP</span><span class="p">:</span> <span class="n">DEFAULT_COLORMAP</span>
                    <span class="p">},</span>
                    <span class="n">FUNCTION</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">SPECTRUM</span><span class="p">:</span> <span class="p">{</span>
                            <span class="n">PRESET_LIST</span><span class="p">:</span> <span class="p">[],</span>
                        <span class="p">},</span>
                        <span class="n">ENCODE</span><span class="p">:</span> <span class="p">{</span>
                            <span class="n">SELECTED</span><span class="p">:</span> <span class="n">DEFAULT_ENCODE_FUNCTION</span><span class="p">,</span>
                        <span class="p">},</span>
                        <span class="n">DECODE</span><span class="p">:</span> <span class="p">{</span>
                            <span class="n">SELECTED</span><span class="p">:</span> <span class="n">DEFAULT_DECODE_FUNCTION</span><span class="p">,</span>
                        <span class="p">},</span>
                        <span class="n">MAPPING</span><span class="p">:</span> <span class="p">{</span>
                            <span class="n">SELECTED</span><span class="p">:</span> <span class="n">DEFAULT_MAPPING_FUNCTION</span><span class="p">,</span>
                        <span class="p">},</span>
                    <span class="p">},</span>
                    <span class="n">DATA_BUFFER_SIZE</span><span class="p">:</span> <span class="n">DEFAULT_BUFFER_SIZE</span><span class="p">,</span>
                    <span class="n">PEAK_TYPE</span><span class="p">:</span> <span class="n">DEFAULT_PEAK_TYPE</span><span class="p">,</span>
                    <span class="n">WINDOW_SIZE</span><span class="p">:</span> <span class="p">[</span>
                        <span class="mi">800</span><span class="p">,</span>
                        <span class="mi">800</span>
                    <span class="p">],</span>
                    <span class="n">LAYOUT</span><span class="p">:</span> <span class="p">{</span>
                        <span class="n">LIST</span><span class="p">:</span> <span class="p">(</span>
                            <span class="n">SPECTRUM_LAYOUT</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="n">SELECTED</span><span class="p">:</span> <span class="n">SPECTRUM_LAYOUT</span><span class="p">,</span>
                    <span class="p">},</span>
                    <span class="n">PERSPECTIVE_SETTING</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">default</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">CUSTOM</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">default</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_setting</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">default</span><span class="p">)</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">default</span> <span class="k">else</span> <span class="n">value</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_setting</span></div>

<div class="viewcode-block" id="IOManager.GetSettingType"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.GetSettingType">[docs]</a>    <span class="k">def</span> <span class="nf">GetSettingType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns the type to which the key belongs.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :return: Setting type.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">DEFAULT</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="p">[</span><span class="n">CUSTOM</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">CUSTOM</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__temp_setting</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TEMPORARY</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">UNKNOWN</span></div>

<div class="viewcode-block" id="IOManager.IsDefaultSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.IsDefaultSetting">[docs]</a>    <span class="k">def</span> <span class="nf">IsDefaultSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns whether the specified key is for &quot;DEFAULT&quot;.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :return: Whether the &quot;key&quot; specifies &quot;DEFAULT&quot; or not.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSettingType</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">DEFAULT</span></div>

<div class="viewcode-block" id="IOManager.IsCustomSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.IsCustomSetting">[docs]</a>    <span class="k">def</span> <span class="nf">IsCustomSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns whether the specified key is for &quot;CUSTOM&quot;.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :return: Whether the &quot;key&quot; specifies &quot;CUSTOM&quot; or not.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSettingType</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">CUSTOM</span></div>

<div class="viewcode-block" id="IOManager.IsTemporarySetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.IsTemporarySetting">[docs]</a>    <span class="k">def</span> <span class="nf">IsTemporarySetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns whether the specified key is for &quot;TEMPORARY&quot;.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :return: Whether the &quot;key&quot; specifies &quot;TEMPORARY&quot; or not.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSettingType</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">TEMPORARY</span></div>

<div class="viewcode-block" id="IOManager.IsUnknownSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.IsUnknownSetting">[docs]</a>    <span class="k">def</span> <span class="nf">IsUnknownSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;This function returns whether the specified key is for &quot;UNKNOWN&quot;.</span>

<span class="sd">        :param key: The key used to search for settings.</span>
<span class="sd">        :type key: Any type</span>
<span class="sd">        :return: Whether the &quot;key&quot; specifies &quot;TEMPORARY&quot; or not.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSettingType</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="n">UNKNOWN</span></div>

<div class="viewcode-block" id="IOManager.SaveSetting"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.SaveSetting">[docs]</a>    <span class="k">def</span> <span class="nf">SaveSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function saves the state of the application to an external file.</span>
<span class="sd">        Not all settings will be saved, but those that meet all of the following conditions will be saved</span>
<span class="sd">        * Belong to either &quot;DEFAULT_SETTIN&quot; or &quot;CUSTOM_SETTING&quot;.</span>
<span class="sd">        * Have been used at least once in the application.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Remove unused setting</span>
        <span class="n">save_setting</span> <span class="o">=</span> <span class="n">DotNotationDict</span><span class="p">()</span>
        <span class="n">initial_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setting</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__used_setting</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">initial_setting</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">save_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="c1"># Add the missind default setting</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">save_setting</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">save_setting</span><span class="o">.</span><span class="n">forced_setitem</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="n">app_setting</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">save_setting</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">IOManager</span><span class="o">.</span><span class="n">iSATexJsonEncoder</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Save setting </span><span class="si">{</span><span class="n">app_setting</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">dir_name</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">dir_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setting_file_path</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">app_setting</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">LogError</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">))</span></div>

<div class="viewcode-block" id="IOManager.SaveColorThemeList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.SaveColorThemeList">[docs]</a>    <span class="k">def</span> <span class="nf">SaveColorThemeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_theme_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Dict</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Save color theme</span>

<span class="sd">        :type color_theme_list: Iterable[Dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">folder_path</span> <span class="o">=</span> <span class="n">abspath</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span> <span class="n">COLOR_THEME_FOLDER_PATH</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">folder_path</span><span class="p">):</span>
            <span class="n">mkdir</span><span class="p">(</span><span class="n">folder_path</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">color_theme</span> <span class="ow">in</span> <span class="n">color_theme_list</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">color_theme</span><span class="p">[</span><span class="n">NAME</span><span class="p">]</span>
            <span class="n">contents</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">color_theme</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">IOManager</span><span class="o">.</span><span class="n">iSATexJsonEncoder</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.json&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">LogError</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__ImportSetting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">setting_dict</span> <span class="o">=</span> <span class="n">DotNotationDict</span><span class="p">(</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">AsStorableObject</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">setting_dict</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span> <span class="o">==</span> <span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="n">SETTING_FILE_PATH</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetInitialSetting</span><span class="p">()</span>
            <span class="n">LogError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">LogError</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetPluginPathList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">abspath</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span> <span class="n">PLUGIN_FOLDER_PATH</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">**/*.py&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__GetColorThemePathList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">abspath</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="vm">__file__</span><span class="p">,</span> <span class="s1">&#39;../&#39;</span><span class="p">,</span> <span class="n">COLOR_THEME_FOLDER_PATH</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">**/*.json&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ImportObjectList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module_path_list</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">,</span> <span class="n">ExcludeClass</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">ExcludeClass</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">ExcludeClass</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">is_match</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">isclass</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ExcludeClass</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ExcludeClass</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">BaseClass</span><span class="p">)</span>

        <span class="n">obj_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">module_path</span> <span class="ow">in</span> <span class="n">module_path_list</span><span class="p">:</span>
            <span class="n">abs_module_path</span> <span class="o">=</span> <span class="n">abspath</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>
            <span class="n">dir_name</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">(</span><span class="n">abs_module_path</span><span class="p">)</span>
            <span class="n">module_name</span> <span class="o">=</span> <span class="n">GetFileName</span><span class="p">(</span><span class="n">abs_module_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dir_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dir_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
                <span class="n">LogError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s1">&quot; module was not found.</span><span class="se">\n</span><span class="s1"> Please check the &quot;setting.json&quot;&#39;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">getmembers</span><span class="p">(</span><span class="n">module</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">is_match</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                    <span class="n">obj_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obj_list</span>

<div class="viewcode-block" id="IOManager.OpenProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.OpenProject">[docs]</a>    <span class="k">def</span> <span class="nf">OpenProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Project</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load an existing project.</span>

<span class="sd">        :param path: Path to an existing project</span>
<span class="sd">        :type path: str</span>
<span class="sd">        :rtype: Project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">compressed_contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="n">contents</span> <span class="o">=</span> <span class="n">decompress</span><span class="p">(</span><span class="n">compressed_contents</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">SAVE_ENCODING</span><span class="p">,</span> <span class="s1">&#39;replace&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">loads</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">AsStorableObject</span><span class="p">)</span></div>

<div class="viewcode-block" id="IOManager.SaveProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.SaveProject">[docs]</a>    <span class="k">def</span> <span class="nf">SaveProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="n">Project</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the project.</span>

<span class="sd">        :type project: Project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">Project</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">contents</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">),</span> <span class="n">allow_nan</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">IOManager</span><span class="o">.</span><span class="n">iSATexJsonEncoder</span><span class="p">)</span>
        <span class="n">compressed_contents</span> <span class="o">=</span> <span class="n">compress</span><span class="p">(</span><span class="n">contents</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">SAVE_ENCODING</span><span class="p">,</span> <span class="s1">&#39;replace&#39;</span><span class="p">))</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">compressed_contents</span><span class="p">)</span></div>

    <span class="c1"># def ImportPlugin(self, path):</span>
    <span class="c1">#     &quot;&quot;&quot;[summary]</span>

    <span class="c1">#     :param path: [description]</span>
    <span class="c1">#     :type path: [type]</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     pass</span>

    <span class="c1"># def ExportPlugin(self, path):</span>
    <span class="c1">#     pass</span>

<div class="viewcode-block" id="IOManager.SearchStorableObject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.SearchStorableObject">[docs]</a>    <span class="k">def</span> <span class="nf">SearchStorableObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StorableObject</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an instance of a storable object.</span>

<span class="sd">        :param class_name: Name of the storable class</span>
<span class="sd">        :type class_name: str</span>
<span class="sd">        :rtype: StorableObject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetSetting</span><span class="p">(</span><span class="n">STORABLE_OBJECT_DICT</span><span class="p">)[</span><span class="n">class_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="IOManager.AsStorableObject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.AsStorableObject">[docs]</a>    <span class="k">def</span> <span class="nf">AsStorableObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dct</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StorableObject</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Convert json to storable object</span>

<span class="sd">        :param dct: Dictionary read from json</span>
<span class="sd">        :type dct: dict</span>
<span class="sd">        :rtype: StorableObject</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_CLASS_NAME</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dct</span> <span class="ow">or</span> <span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_DATA</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">dct</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dct</span>

        <span class="n">class_name</span> <span class="o">=</span> <span class="n">dct</span><span class="p">[</span><span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_CLASS_NAME</span><span class="p">]</span>
        <span class="n">save_data</span> <span class="o">=</span> <span class="n">dct</span><span class="p">[</span><span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_DATA</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SearchStorableObject</span><span class="p">(</span><span class="n">class_name</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">ReceiveSaveData</span><span class="p">(</span><span class="n">save_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span></div>

<div class="viewcode-block" id="IOManager.iSATexJsonEncoder"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.iSATexJsonEncoder">[docs]</a>    <span class="k">class</span> <span class="nc">iSATexJsonEncoder</span><span class="p">(</span><span class="n">JSONEncoder</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class for converting iSATex to json files</span>
<span class="sd">        &quot;&quot;&quot;</span>

<div class="viewcode-block" id="IOManager.iSATexJsonEncoder.default"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.iSATexJsonEncoder.default">[docs]</a>        <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="n">inf</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;Infinity&#39;</span>

            <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="o">-</span><span class="n">inf</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;-Infinity&#39;</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">StorableObject</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSaveDataDict</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="IOManager.iSATexJsonEncoder.GetSaveDataDict"><a class="viewcode-back" href="../../isatex.html#isatex.manager.IOManager.iSATexJsonEncoder.GetSaveDataDict">[docs]</a>        <span class="k">def</span> <span class="nf">GetSaveDataDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
            <span class="n">save_data_dict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">save_data_dict</span><span class="p">[</span><span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_CLASS_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="n">save_data</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">SendSaveData</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">save_data</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">save_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">StorableObject</span><span class="p">):</span>
                        <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSaveDataDict</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">save_data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">save_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">StorableObject</span><span class="p">):</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSaveDataDict</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">save_data</span>

            <span class="n">save_data_dict</span><span class="p">[</span><span class="n">IOManager</span><span class="o">.</span><span class="n">SAVE_MARKER_DATA</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">return</span> <span class="n">save_data_dict</span></div></div></div>


<div class="viewcode-block" id="EventManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager">[docs]</a><span class="k">class</span> <span class="nc">EventManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for control Event</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__event_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__event_receptor_list</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="EventManager.GetEventList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.GetEventList">[docs]</a>    <span class="k">def</span> <span class="nf">GetEventList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">iSATexEventBinder</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered events.</span>

<span class="sd">        :rtype: Iterable[iSATexEventBinder]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__event_list</span></div>

<div class="viewcode-block" id="EventManager.RegisterEventList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.RegisterEventList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterEventList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">iSATexEventBinder</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Register a list of events.</span>

<span class="sd">        :type event_list: Iterable[Event]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">HasValidElement</span><span class="p">(</span><span class="n">event_list</span><span class="p">,</span> <span class="n">iSATexEventBinder</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__event_list</span> <span class="o">=</span> <span class="n">event_list</span></div>

<div class="viewcode-block" id="EventManager.GetEventReceptorList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.GetEventReceptorList">[docs]</a>    <span class="k">def</span> <span class="nf">GetEventReceptorList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EventReceptorBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered event receptors.</span>

<span class="sd">        :rtype: Iterable[EventReceptorBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__event_receptor_list</span></div>

<div class="viewcode-block" id="EventManager.RegisterEventReceptorList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.RegisterEventReceptorList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterEventReceptorList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_receptor_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">EventReceptorBase</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Register the event receptor.</span>

<span class="sd">        :type event_receptor_list: Iterable[EventReceptorBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">HasValidElement</span><span class="p">(</span><span class="n">event_receptor_list</span><span class="p">,</span> <span class="n">EventReceptorBase</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__event_receptor_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">event_receptor_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="EventManager.SendEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.SendEvent">[docs]</a>    <span class="k">def</span> <span class="nf">SendEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function sends an event to an instance of the &quot;PanelBase&quot; class and to the manager.</span>
<span class="sd">        Note that the event will not be sent until the project is started.</span>

<span class="sd">        :param event: Event object to be sent.</span>
<span class="sd">        :type event: Any type</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Event of </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> is occur.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">OnEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">manager</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MANAGER_LIST</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="s1">&#39;OnEvent&#39;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">manager</span><span class="o">.</span><span class="n">OnEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">SendEventToReceptor</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="EventManager.SendEventToReceptor"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.SendEventToReceptor">[docs]</a>    <span class="k">def</span> <span class="nf">SendEventToReceptor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">iSATexEvent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Notifies the event receptor of the event.</span>

<span class="sd">        :type event: iSATexEvent</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">receptor_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__event_receptor_list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetReceptionOrder</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">receptor</span> <span class="ow">in</span> <span class="n">receptor_list</span><span class="p">:</span>
            <span class="n">receptor</span><span class="o">.</span><span class="n">OnEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="EventManager.GetReceptionOrder"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EventManager.GetReceptionOrder">[docs]</a>    <span class="k">def</span> <span class="nf">GetReceptionOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receptor</span><span class="p">:</span> <span class="n">EventReceptorBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defines the event fired order.</span>
<span class="sd">        Events are fired in ascending order and default order is following.</span>

<span class="sd">        0 Managers  :  -1</span>
<span class="sd">        1 MenuItems :  90</span>
<span class="sd">        2 Panels    : 100</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">receptor</span><span class="p">,</span> <span class="n">EventReceptorBase</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">receptor</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">90</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">receptor</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">100</span>

        <span class="k">return</span> <span class="mi">50</span></div></div>


<div class="viewcode-block" id="MenubarManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager">[docs]</a><span class="k">class</span> <span class="nc">MenubarManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is used to manage the menubar. This class can generate and change the design of the menu bar.</span>
<span class="sd">    Please refer to the function of &quot;CreateMenu&quot; documentation for details on how to change the design.</span>
<span class="sd">    Note: If you want to know more about how to change the design, please refer to the documentation of the function &quot;CreateMenubar&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_menu_design</span> <span class="o">=</span> <span class="p">[</span><span class="n">PEAK_MENU</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__show_panel_menu_design</span> <span class="o">=</span> <span class="p">[</span><span class="n">SHOW_PANEL_MENU</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout_menu_design</span> <span class="o">=</span> <span class="p">[</span><span class="n">LAYOUT_MENU</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__plugin_menu_design</span> <span class="o">=</span> <span class="p">[</span><span class="n">PLUGIN_MENU</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">EXIT_MENU_ITEM</span><span class="p">:</span> <span class="n">MenuItem</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">ID_CLOSE</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">EXIT_MENU_ITEM</span><span class="p">,</span> <span class="n">helpString</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">ITEM_NORMAL</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__menubar_design</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="MenubarManager.ExecuteMenuFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.ExecuteMenuFunction">[docs]</a>    <span class="k">def</span> <span class="nf">ExecuteMenuFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Executes the function of the menu item with the specified key.</span>

<span class="sd">        :type key: str</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menuitem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMenuItem</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menuitem</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="k">return</span> <span class="n">menuitem</span><span class="o">.</span><span class="n">Function</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__FindMenuItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_label</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">menu</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span><span class="o">.</span><span class="n">GetMenus</span><span class="p">():</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">id_</span> <span class="o">:=</span> <span class="n">menu</span><span class="o">.</span><span class="n">FindItem</span><span class="p">(</span><span class="n">item_label</span><span class="p">))</span> <span class="o">==</span> <span class="n">NOT_FOUND</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">return</span> <span class="n">menu</span><span class="o">.</span><span class="n">FindItemById</span><span class="p">(</span><span class="n">id_</span><span class="p">)</span>

<div class="viewcode-block" id="MenubarManager.GetMenuItem"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetMenuItem">[docs]</a>    <span class="k">def</span> <span class="nf">GetMenuItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CustomMenuItemBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the menu item for the specified key. If it is not found, return None.</span>

<span class="sd">        :type key: str</span>
<span class="sd">        :rtype: CustomMenuItemBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__FindMenuItem</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.GetMenuItemList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetMenuItemList">[docs]</a>    <span class="k">def</span> <span class="nf">GetMenuItemList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">CustomMenuItemBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of managed menu items.</span>

<span class="sd">        :rtype: List[CustomMenuItemBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>

<div class="viewcode-block" id="MenubarManager.GetPeakMenuItemList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetPeakMenuItemList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeakMenuItemList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PeakMenuItem</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of managed peak menu items.</span>

<span class="sd">        :rtype: Tuple[PeakMenuItem, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">menu_item</span> <span class="k">for</span> <span class="n">menu_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu_item</span><span class="p">,</span> <span class="n">PeakMenuItem</span><span class="p">)])</span></div>

<div class="viewcode-block" id="MenubarManager.GetShowMenuItemList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetShowMenuItemList">[docs]</a>    <span class="k">def</span> <span class="nf">GetShowMenuItemList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ShowPanelMenuItem</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of maneged show panel menu items.</span>

<span class="sd">        :rtype: Tuple[ShowPanelMenuItem, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">menu_item</span> <span class="k">for</span> <span class="n">menu_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu_item</span><span class="p">,</span> <span class="n">ShowPanelMenuItem</span><span class="p">)])</span></div>

<div class="viewcode-block" id="MenubarManager.GetPluginMenuItemList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetPluginMenuItemList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPluginMenuItemList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;FURUTE WORK</span>

<span class="sd">        :return: [description]</span>
<span class="sd">        :rtype: [type]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_menu_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDefaultMenuItemLabelList</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">mi</span> <span class="k">for</span> <span class="n">mi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">mi</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span> <span class="ow">in</span> <span class="n">default_menu_list</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mi</span><span class="p">,</span> <span class="p">(</span><span class="n">PeakMenuItem</span><span class="p">,</span> <span class="n">LayoutMenuItem</span><span class="p">,</span> <span class="n">ShowPanelMenuItem</span><span class="p">)))])</span></div>

<div class="viewcode-block" id="MenubarManager.CheckMenuItem"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.CheckMenuItem">[docs]</a>    <span class="k">def</span> <span class="nf">CheckMenuItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks the menu item for the specified key.</span>

<span class="sd">        :param key: Key to specify a menu item. If the menu item is not found or cannot be checked, it will be ignored.</span>
<span class="sd">        :type key: str</span>
<span class="sd">        :param check: Checks the menu item for the specified key. Defaults to True</span>
<span class="sd">        :type check: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">menu_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">IsCheckable</span><span class="p">():</span>
            <span class="n">menu_item</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="n">check</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.EnableMenuItem"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.EnableMenuItem">[docs]</a>    <span class="k">def</span> <span class="nf">EnableMenuItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enables the menu item for the specified key.</span>

<span class="sd">        :type key: str</span>
<span class="sd">        :param enable: If true, the menu item will be enabled for selection; if false, it will be disabled., defaults to True</span>
<span class="sd">        :type enable: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">menu_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">menu_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">menu_item</span><span class="o">.</span><span class="n">Enable</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.RegisterMenuItemList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.RegisterMenuItemList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterMenuItemList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu_item_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">CustomMenuItemBase</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Register a list of menu items.</span>

<span class="sd">        :type menu_item_list: Iterable[CustomMenuItemBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu_item</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">)</span> <span class="k">for</span> <span class="n">menu_item</span> <span class="ow">in</span> <span class="n">menu_item_list</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Element of &quot;menu_item_list&quot; should be instance of &quot;CustomMenuItemBase&quot;.&#39;</span><span class="p">)</span>

        <span class="c1"># default_menu_item_label_list = self.__GetDefaultMenuItemLabelList()</span>

        <span class="k">for</span> <span class="n">menu_item</span> <span class="ow">in</span> <span class="n">menu_item_list</span><span class="p">:</span>
            <span class="n">item_label</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span>
            <span class="c1"># if isinstance(menu_item, PeakMenuItem):</span>
            <span class="c1">#     self.__peak_menu_item_set.add(menu_item)</span>
            <span class="c1"># elif isinstance(menu_item, ShowPanelMenuItem):</span>
            <span class="c1">#     self.__show_menu_item_set.add(menu_item)</span>
            <span class="c1"># else:</span>
            <span class="c1">#     if item_label not in default_menu_item_label_list:</span>
            <span class="c1">#         self.__plugin_menu_item_set.add(menu_item)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="p">[</span><span class="n">item_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu_item</span>

        <span class="n">plugin_menu_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPluginMenuItemList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AppendPluginMenuItem</span><span class="p">(</span><span class="n">plugin_menu_item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.CreateMenubar"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.CreateMenubar">[docs]</a>    <span class="k">def</span> <span class="nf">CreateMenubar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MenuBar</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Create a menu bar from the design.</span>

<span class="sd">        :param design: Menubar design. Refer to &quot;GetMenubarDesign&quot;\&#39;s documentation for details.</span>
<span class="sd">        :type design: dict</span>
<span class="sd">        :rtype: MenuBar</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Create menubar from </span><span class="si">{</span><span class="n">design</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">menubar</span> <span class="o">=</span> <span class="n">MenuBar</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
            <span class="n">menu</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__CreateMenu</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
            <span class="n">menubar</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="o">=</span> <span class="n">menubar</span>

        <span class="k">return</span> <span class="n">menubar</span></div>

    <span class="k">def</span> <span class="nf">__CreateMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">):</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">design</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">menu_item_keys</span> <span class="o">=</span> <span class="n">design</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">menu_item_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">sub_menu</span><span class="p">,</span> <span class="n">sub_title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__CreateMenu</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">AppendSubMenu</span><span class="p">(</span><span class="n">sub_menu</span><span class="p">,</span> <span class="n">sub_title</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">SEPARATOR</span><span class="p">:</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">AppendSeparator</span><span class="p">()</span>
                <span class="k">continue</span>

            <span class="n">menu_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">menu_item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu_item</span><span class="p">,</span> <span class="n">ShowPanelMenuItem</span><span class="p">):</span>
                <span class="n">panel</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetPanel</span><span class="p">()</span>
                <span class="n">shown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">GetSetting</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">SHOW</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span>
                <span class="n">menu_item</span><span class="o">.</span><span class="n">Check</span><span class="p">(</span><span class="n">shown</span><span class="p">)</span>

            <span class="c1"># if isinstance(menu_item, PeakMenuItem):</span>
            <span class="c1">#     peak_type = self.__core_mgr.Get(DotChain(PEAK_TYPE, SELECTED))</span>
            <span class="c1">#     if peak_type.GetName() == menu_item.GetItemLabel():</span>
            <span class="c1">#         menu_item.Check(True)</span>
            <span class="c1">#     else:</span>
            <span class="c1">#         menu_item.Check(False)</span>

            <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu_item</span><span class="p">)</span>
            <span class="n">menu_item</span><span class="o">.</span><span class="n">SetMenu</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">menu</span><span class="p">,</span> <span class="n">title</span>

<div class="viewcode-block" id="MenubarManager.GetMenubarDesign"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetMenubarDesign">[docs]</a>    <span class="k">def</span> <span class="nf">GetMenubarDesign</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get menubar design. The design of the menu bar consists of a key of menu items.</span>
<span class="sd">        The list is designed as a collapsible menu, with the 0th title representing the first menu item and the rest representing the children menu items.</span>

<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDefaultMenubarDesign</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar_design</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar_design</span></div>

<div class="viewcode-block" id="MenubarManager.GetDefaultMenubarDesign"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.GetDefaultMenubarDesign">[docs]</a>    <span class="k">def</span> <span class="nf">GetDefaultMenubarDesign</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get default menubar design.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">[</span><span class="n">FILE_MENU</span><span class="p">,</span>
                <span class="n">NEW_MENU_ITEM</span><span class="p">,</span>
                <span class="n">OPEN_MENU_ITEM</span><span class="p">,</span>
                <span class="n">SEPARATOR</span><span class="p">,</span>
                <span class="n">SAVE_MENU_ITEM</span><span class="p">,</span>
                <span class="n">SAVE_AS_MENU_ITEM</span><span class="p">,</span>
                <span class="n">SEPARATOR</span><span class="p">,</span>
                <span class="n">EXPORT_MENU_ITEM</span><span class="p">,</span>
                <span class="n">SEPARATOR</span><span class="p">,</span>
                <span class="c1"># IMPORT_PLUGIN_MENU_ITEM,</span>
                <span class="c1"># EXPORT_PLUGIN_MENU_ITEM,</span>
                <span class="c1"># SEPARATOR,</span>
                <span class="n">EXIT_MENU_ITEM</span>
             <span class="p">],</span>
            <span class="p">[</span><span class="n">EDIT_MENU</span><span class="p">,</span>
                <span class="p">[</span><span class="n">PROJECT_MENU</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_menu_design</span><span class="p">,</span>
                    <span class="n">PROJECT_MEMO_MENU_ITEM</span><span class="p">,</span>
                 <span class="p">],</span>
                <span class="n">SEPARATOR</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__plugin_menu_design</span><span class="p">,</span>
                <span class="n">SEPARATOR</span><span class="p">,</span>
                <span class="n">PREFERENCE_MENU_ITEM</span><span class="p">,</span>
             <span class="p">],</span>
            <span class="p">[</span><span class="n">VIEW_MENU</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__show_panel_menu_design</span><span class="p">,</span>
                <span class="c1"># SEPARATOR,</span>
                <span class="c1"># self.__layout_menu_design,</span>
             <span class="p">],</span>
            <span class="p">[</span><span class="n">HELP_MENU</span><span class="p">,</span>
                <span class="n">ABOUT_MENU_ITEM</span><span class="p">,</span>
                <span class="n">TUTORIAL_MENU_ITEM</span><span class="p">,</span>
             <span class="p">]</span>
        <span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">__GetDefaultMenuItemLabelList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">NEW_MENU_ITEM</span><span class="p">,</span>
            <span class="n">OPEN_MENU_ITEM</span><span class="p">,</span>
            <span class="n">SAVE_MENU_ITEM</span><span class="p">,</span>
            <span class="n">SAVE_AS_MENU_ITEM</span><span class="p">,</span>
            <span class="n">EXPORT_MENU_ITEM</span><span class="p">,</span>
            <span class="n">IMPORT_PLUGIN_MENU_ITEM</span><span class="p">,</span>
            <span class="n">EXPORT_PLUGIN_MENU_ITEM</span><span class="p">,</span>
            <span class="n">EXIT_MENU_ITEM</span><span class="p">,</span>
            <span class="n">PROJECT_MEMO_MENU_ITEM</span><span class="p">,</span>
            <span class="n">PREFERENCE_MENU_ITEM</span><span class="p">,</span>
            <span class="n">ABOUT_MENU_ITEM</span><span class="p">,</span>
            <span class="n">TUTORIAL_MENU_ITEM</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="MenubarManager.SetMenubarDesign"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.SetMenubarDesign">[docs]</a>    <span class="k">def</span> <span class="nf">SetMenubarDesign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the menu bar design.</span>

<span class="sd">        :param design: Please refer to &quot;GetMenubarDesign&quot;\&#39;s Documentation for details.</span>
<span class="sd">        :type design: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsMenubarDesign</span><span class="p">(</span><span class="n">design</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__menubar_design</span> <span class="o">=</span> <span class="n">design</span></div>

    <span class="k">def</span> <span class="nf">__IsMenubarDesign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__IsMenubarDesign</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">)):</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># def __CreatePeakMenuDesign(self):</span>
    <span class="c1">#     selected_peak_type_name = self.__core_mgr.Get(PEAK_MANAGER).GetSelectedPeakType().GetName()</span>
    <span class="c1">#     peak_type_list = self.__core_mgr.Get(PEAK_MANAGER).GetPeakTypeList()</span>

    <span class="c1">#     design = [PEAK_MENU]</span>
    <span class="c1">#     for peak_type in peak_type_list:</span>
    <span class="c1">#         menu_item = PeakMenuItem(peak_type)</span>
    <span class="c1">#         item_label = menu_item.GetItemLabel()</span>
    <span class="c1">#         if item_label == selected_peak_type_name:</span>
    <span class="c1">#             menu_item.Check(True)</span>

    <span class="c1">#         self.__menu_item_dict[item_label] = menu_item</span>
    <span class="c1">#         self.__peak_menu_item_set.add(menu_item)</span>

    <span class="c1">#         design.append(item_label)</span>

    <span class="c1">#     return design</span>

    <span class="c1"># def __CreateShowPanelMenuDesign(self):</span>
    <span class="c1">#     panel_list = self.__core_mgr.Get(PANEL_MANAGER).GetPanelList()</span>
    <span class="c1">#     spectrum_panel = self.__core_mgr.Get(PANEL_MANAGER).GetPanel(SPECTRUM_PANEL)</span>

    <span class="c1">#     design = [SHOW_PANEL_MENU]</span>
    <span class="c1">#     for panel in panel_list:</span>
    <span class="c1">#         if spectrum_panel == panel:</span>
    <span class="c1">#             continue</span>

    <span class="c1">#         menu_item = ShowPanelMenuItem(panel)</span>
    <span class="c1">#         item_label = menu_item.GetItemLabel()</span>

    <span class="c1">#         self.__menu_item_dict[item_label] = menu_item</span>
    <span class="c1">#         self.__show_menu_item_set.add(menu_item)</span>

    <span class="c1">#         design.append(item_label)</span>

    <span class="c1">#     return design</span>

    <span class="c1"># def __CreatePluginMenuDesign(self):</span>
    <span class="c1">#     design = [PLUGIN_MENU]</span>
    <span class="c1">#     design.extend([plugin_menu.GetItemLabel() for plugin_menu in self.__plugin_menu_item_set])</span>
    <span class="c1">#     return design</span>

<div class="viewcode-block" id="MenubarManager.AppendPeakMenu"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.AppendPeakMenu">[docs]</a>    <span class="k">def</span> <span class="nf">AppendPeakMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peak_type_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">PeakType</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Append a peak menu.</span>

<span class="sd">        :type peak_type_list: Iterable[PeakType]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peak_type_list</span><span class="p">,</span> <span class="n">PeakType</span><span class="p">):</span>
            <span class="n">peak_type_list</span> <span class="o">=</span> <span class="p">(</span><span class="n">peak_type_list</span><span class="p">,)</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMenuItem</span><span class="p">(</span><span class="n">PEAK_MENU</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">peak_type</span> <span class="ow">in</span> <span class="n">peak_type_list</span><span class="p">:</span>
            <span class="n">menu_item</span> <span class="o">=</span> <span class="n">PeakMenuItem</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>
            <span class="n">item_label</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="p">[</span><span class="n">item_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu_item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_menu_design</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">menu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu_item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.AppendShowPanelMenu"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.AppendShowPanelMenu">[docs]</a>    <span class="k">def</span> <span class="nf">AppendShowPanelMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">panel_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">PanelBase</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Append a show panel menu.</span>

<span class="sd">        :type panel_list: Iterable[PanelBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">panel_list</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">):</span>
            <span class="n">panel_list</span> <span class="o">=</span> <span class="p">(</span><span class="n">panel_list</span><span class="p">,)</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMenuItem</span><span class="p">(</span><span class="n">SHOW_PANEL_MENU</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">panel_list</span><span class="p">:</span>
            <span class="n">menu_item</span> <span class="o">=</span> <span class="n">ShowPanelMenuItem</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
            <span class="n">item_label</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="p">[</span><span class="n">item_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu_item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__show_panel_menu_design</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">menu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu_item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.AppendLayoutMenu"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.AppendLayoutMenu">[docs]</a>    <span class="k">def</span> <span class="nf">AppendLayoutMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_list</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;Append layout menu.</span>

<span class="sd">        :param name_list: a list of layout name.</span>
<span class="sd">        :type name_list: Union[str, Iterable[str]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name_list</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">name_list</span> <span class="o">=</span> <span class="p">(</span><span class="n">name_list</span><span class="p">,)</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMenuItem</span><span class="p">(</span><span class="n">LAYOUT_MENU</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
            <span class="n">menu_item</span> <span class="o">=</span> <span class="n">LayoutMenuItem</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">item_label</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="p">[</span><span class="n">item_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu_item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__layout_menu_design</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">menu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu_item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.AppendPluginMenuItem"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.AppendPluginMenuItem">[docs]</a>    <span class="k">def</span> <span class="nf">AppendPluginMenuItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">menu_item_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">CustomMenuItemBase</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Append plugin menu item.</span>

<span class="sd">        :type menu_item_list: Iterable[CustomMenuItem]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">menu_item_list</span><span class="p">,</span> <span class="n">CustomMenuItemBase</span><span class="p">):</span>
            <span class="n">menu_item_list</span> <span class="o">=</span> <span class="p">(</span><span class="n">menu_item_list</span><span class="p">,)</span>

        <span class="n">menu</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetMenuItem</span><span class="p">(</span><span class="n">LAYOUT_MENU</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">menu_item</span> <span class="ow">in</span> <span class="n">menu_item_list</span><span class="p">:</span>
            <span class="n">item_label</span> <span class="o">=</span> <span class="n">menu_item</span><span class="o">.</span><span class="n">GetItemLabel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__menu_item_dict</span><span class="p">[</span><span class="n">item_label</span><span class="p">]</span> <span class="o">=</span> <span class="n">menu_item</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__plugin_menu_design</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item_label</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">menu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">menu</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">menu_item</span><span class="p">)</span></div>

<div class="viewcode-block" id="MenubarManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MenubarManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_CLOSE</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_LAUNCH</span><span class="p">:</span>
            <span class="n">PeakMenuItem</span><span class="o">.</span><span class="n">_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PEAK_MANAGER</span><span class="p">)</span>
            <span class="n">ShowPanelMenuItem</span><span class="o">.</span><span class="n">_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PANEL_MANAGER</span><span class="p">)</span>
            <span class="n">LayoutMenuItem</span><span class="o">.</span><span class="n">_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PANEL_MANAGER</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_LAYOUT_REGISTER</span><span class="p">:</span>
            <span class="n">layout_names</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetLayoutNames</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AppendLayoutMenu</span><span class="p">(</span><span class="n">layout_names</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PEAK_TYPE_REGISTER</span><span class="p">:</span>
            <span class="n">peak_type_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetNewPeakTypeList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AppendPeakMenu</span><span class="p">(</span><span class="n">peak_type_list</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">EVENT_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">RegisterEventReceptorList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetPeakMenuItemList</span><span class="p">())</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PANEL_REGISTER</span><span class="p">:</span>
            <span class="n">panel_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetNewPanelList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">AppendShowPanelMenu</span><span class="p">(</span><span class="n">panel_list</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_COMMAND_MENU_SELECTED</span><span class="p">:</span>

            <span class="n">menu_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__menubar</span><span class="o">.</span><span class="n">FindItemById</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">menu_item</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Menu event of </span><span class="si">{</span><span class="n">event</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> is occur.&#39;</span><span class="p">)</span>
            <span class="n">menu_item</span><span class="o">.</span><span class="n">Function</span><span class="p">()</span></div></div>

        <span class="c1"># elif event_type == wxEVT_MENU_OPEN:</span>
        <span class="c1">#     selected_peak_name = self.__core_mgr.Get(PROJECTMANAGER)</span>
        <span class="c1">#     menu = event.GetMenu()</span>
        <span class="c1">#     for menu_item in menu.GetMenuItems():</span>
        <span class="c1">#         if menu_item.Get</span>

        <span class="c1"># elif event_type == wxEVT_PEAK_TYPE_REGISTER:</span>
        <span class="c1">#     peak_type = self.__core_mgr.Get(PROJECT_MANAGER).GetSelectedPeakType()</span>
        <span class="c1">#     print(peak_type)</span>

        <span class="c1"># elif event_type == wxEVT_PEAK_TYPE_CHANGE:</span>
        <span class="c1">#     peak_type = event.GetPeakType()</span>
        <span class="c1">#     self.CheckMenuItem(peak_type.GetName())</span>


<div class="viewcode-block" id="PanelManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager">[docs]</a><span class="k">class</span> <span class="nc">PanelManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">,</span> <span class="n">AuiManager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager to register panels and layout.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This class is responsible for referencing, registering, and selecting Panels and implemented with the Singleton pattern.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">agwFlags</span><span class="o">=</span><span class="n">AUI_MGR_ALLOW_FLOATING</span> <span class="o">|</span> <span class="n">AUI_MGR_ALLOW_ACTIVE_PANE</span> <span class="o">|</span> <span class="n">AUI_MGR_TRANSPARENT_DRAG</span> <span class="o">|</span> <span class="n">AUI_MGR_LIVE_RESIZE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__panel_dict</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="PanelManager.GetPanel"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetPanel">[docs]</a>    <span class="k">def</span> <span class="nf">GetPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PanelBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the panel specified by the key.</span>

<span class="sd">        :type key: str</span>
<span class="sd">        :rtype: PanelBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">MAIN_WINDOW</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetManagedWindow</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__panel_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanelManager.GetPanelList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetPanelList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPanelList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">PanelBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the list of registered panels.</span>

<span class="sd">        :rtype: Iterable[PanelBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pane_info</span><span class="o">.</span><span class="n">window</span> <span class="k">for</span> <span class="n">pane_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetAllPanes</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pane_info</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">)]</span></div>

<div class="viewcode-block" id="PanelManager.GetSelectedPanel"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetSelectedPanel">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedPanel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PanelBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected panel. Returns None if it is not selected.</span>

<span class="sd">        :rtype: PanelBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span></div>

<div class="viewcode-block" id="PanelManager.SetMainWindow"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.SetMainWindow">[docs]</a>    <span class="k">def</span> <span class="nf">SetMainWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">Window</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register the passed window as the main window.</span>

<span class="sd">        :type window: Window</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetManagedWindow</span><span class="p">(</span><span class="n">window</span><span class="p">)</span></div>

    <span class="c1"># def RegisterPanelList(self, PanelClassList, perspective, main_window):</span>
    <span class="c1">#     panel_info_dict = self.__ConvertPanelInfoDict(perspective)</span>

    <span class="c1">#     notebook_dict = {}</span>
    <span class="c1">#     for notebook_info in sorted(panel_info_dict[&#39;notebook_list&#39;], key=lambda x: x[&#39;notebookid&#39;]):</span>
    <span class="c1">#         notebookid = notebook_info[&#39;notebookid&#39;]</span>

    <span class="c1">#         parent = notebook_dict.get(notebookid, main_window)</span>
    <span class="c1">#         notebook = AuiNotebook(parent, agwStyle=AUI_NB_BOTTOM)</span>
    <span class="c1">#         notebook_dict[notebookid] = notebook</span>

    <span class="c1">#         aui_info = AuiPaneInfo()</span>
    <span class="c1">#         aui_info.caption = notebook_info[&#39;caption&#39;]</span>
    <span class="c1">#         aui_info.SetFlag(notebook_info[&#39;state&#39;], True)</span>
    <span class="c1">#         aui_info.Layer(notebook_info[&#39;layer&#39;])</span>
    <span class="c1">#         aui_info.Direction(notebook_info[&#39;dir&#39;])</span>
    <span class="c1">#         aui_info.Row(notebook_info[&#39;row&#39;])</span>
    <span class="c1">#         aui_info.Position(notebook_info[&#39;pos&#39;])</span>
    <span class="c1">#         aui_info.BestSize(notebook_info[&#39;bestw&#39;], notebook_info[&#39;besth&#39;])</span>
    <span class="c1">#         aui_info.MinSize(notebook_info[&#39;minw&#39;], notebook_info[&#39;minh&#39;])</span>
    <span class="c1">#         aui_info.MaxSize(notebook_info[&#39;maxw&#39;], notebook_info[&#39;maxh&#39;])</span>
    <span class="c1">#         aui_info.FloatingSize((notebook_info[&#39;floatw&#39;], notebook_info[&#39;floath&#39;]))</span>

    <span class="c1">#         self.AddPane(notebook, aui_info)</span>

    <span class="c1">#     prev_panel_list = self.GetPanelList()</span>
    <span class="c1">#     for PanelClass in PanelClassList:</span>
    <span class="c1">#         if PanelClass.__name__ in self.__panel_dict:</span>
    <span class="c1">#             continue</span>

    <span class="c1">#         if (key := Camel2Pascal(PanelClass.__name__)) in panel_info_dict:</span>
    <span class="c1">#             panel_info = panel_info_dict[key]</span>

    <span class="c1">#             aui_info = AuiPaneInfo()</span>
    <span class="c1">#             aui_info.Caption(panel_info[&#39;caption&#39;])</span>
    <span class="c1">#             aui_info.SetFlag(panel_info[&#39;state&#39;], True)</span>
    <span class="c1">#             aui_info.Layer(panel_info[&#39;layer&#39;])</span>
    <span class="c1">#             aui_info.Direction(panel_info[&#39;dir&#39;])</span>
    <span class="c1">#             aui_info.Row(panel_info[&#39;row&#39;])</span>
    <span class="c1">#             aui_info.Position(panel_info[&#39;pos&#39;])</span>
    <span class="c1">#             aui_info.BestSize(panel_info[&#39;bestw&#39;], panel_info[&#39;besth&#39;])</span>
    <span class="c1">#             aui_info.MinSize(panel_info[&#39;minw&#39;], panel_info[&#39;minh&#39;])</span>
    <span class="c1">#             aui_info.MaxSize(panel_info[&#39;maxw&#39;], panel_info[&#39;maxh&#39;])</span>
    <span class="c1">#             aui_info.FloatingSize((panel_info[&#39;floatw&#39;], panel_info[&#39;floath&#39;]))</span>

    <span class="c1">#             aui_info.MaximizeButton().PinButton().CloseButton().NotebookDockable(False)</span>

    <span class="c1">#             if (key := panel_info[&#39;notebookid&#39;]) in notebook_dict:</span>
    <span class="c1">#                 notebook = notebook_dict[key]</span>
    <span class="c1">#                 panel = PanelClass(parent=notebook)</span>
    <span class="c1">#                 notebook.AddPage(panel, panel_info[&#39;caption&#39;])</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 panel = PanelClass(parent=main_window)</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             panel = PanelClass(parent=main_window)</span>
    <span class="c1">#             aui_info = self.__CreateAuiPaneInfo(panel)</span>

    <span class="c1">#         if isinstance(panel, SpectrumPanel):</span>
    <span class="c1">#             aui_info = aui_info.CenterPane()</span>

    <span class="c1">#         self.AddPane(panel, aui_info)</span>

    <span class="c1">#     self.Update()</span>
    <span class="c1">#     for panel in self.GetPanelList():</span>
    <span class="c1">#         self.__panel_dict[panel.__class__.__name__] = panel</span>

    <span class="c1">#     panel_list = self.GetPanelList()</span>
    <span class="c1">#     event = PanelRegisterEvent(panel_list, prev_panel_list, id=self.__id)</span>
    <span class="c1">#     self.__core_mgr.SendEvent(event)</span>

    <span class="c1">#     return panel_list</span>

<div class="viewcode-block" id="PanelManager.RegisterPanelList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.RegisterPanelList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterPanelList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">panel_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">PanelBase</span><span class="p">],</span> <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register a list of panels. The panels will be placed in the passed layout.</span>

<span class="sd">        :type panel_list: Iterable[PanelBase]</span>
<span class="sd">        :type layout: Optional[str], optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">layout</span>

        <span class="n">panel_info_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertPanelInfoDict</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">prev_panel_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">panel_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__panel_dict</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="o">:=</span> <span class="n">Camel2Pascal</span><span class="p">(</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span> <span class="ow">in</span> <span class="n">panel_info_dict</span><span class="p">:</span>
                <span class="n">panel_info</span> <span class="o">=</span> <span class="n">panel_info_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

                <span class="n">aui_info</span> <span class="o">=</span> <span class="n">AuiPaneInfo</span><span class="p">()</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">SetFlag</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;layer&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">Direction</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;dir&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">Position</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">BestSize</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;bestw&#39;</span><span class="p">],</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;besth&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">MinSize</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;minw&#39;</span><span class="p">],</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;minh&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">MaxSize</span><span class="p">(</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;maxw&#39;</span><span class="p">],</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;maxh&#39;</span><span class="p">])</span>
                <span class="n">aui_info</span><span class="o">.</span><span class="n">FloatingSize</span><span class="p">((</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;floatw&#39;</span><span class="p">],</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;floath&#39;</span><span class="p">]))</span>

                <span class="n">aui_info</span><span class="o">.</span><span class="n">MaximizeButton</span><span class="p">()</span><span class="o">.</span><span class="n">PinButton</span><span class="p">()</span><span class="o">.</span><span class="n">CloseButton</span><span class="p">()</span><span class="o">.</span><span class="n">NotebookDockable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">aui_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__CreateAuiPaneInfo</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">SpectrumPanel</span><span class="p">):</span>
                <span class="n">aui_info</span> <span class="o">=</span> <span class="n">aui_info</span><span class="o">.</span><span class="n">CenterPane</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">aui_info</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__panel_dict</span><span class="p">[</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">panel</span>

        <span class="n">panel_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">()</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">PanelRegisterEvent</span><span class="p">(</span><span class="n">panel_list</span><span class="p">,</span> <span class="n">prev_panel_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__CreateAuiPaneInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">panel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AuiPaneInfo</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">Camel2Pascal</span><span class="p">(</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">aui_info</span> <span class="o">=</span> <span class="n">AuiPaneInfo</span><span class="p">()</span><span class="o">.</span><span class="n">MaximizeButton</span><span class="p">()</span><span class="o">.</span><span class="n">PinButton</span><span class="p">()</span><span class="o">.</span><span class="n">CloseButton</span><span class="p">()</span><span class="o">.</span><span class="n">NotebookDockable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span><span class="o">.</span><span class="n">Caption</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="n">is_shown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">SHOW</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_shown</span><span class="p">:</span>
            <span class="n">aui_info</span> <span class="o">=</span> <span class="n">aui_info</span><span class="o">.</span><span class="n">Hide</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">aui_info</span>

    <span class="k">def</span> <span class="nf">__ConvertPanelInfoDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">perspective</span><span class="p">):</span>
        <span class="n">panel_info_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;notebook_list&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">for</span> <span class="n">panel_perspective</span> <span class="ow">in</span> <span class="n">perspective</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">panel_info</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">panel_perspective</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">item</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">panel_info</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">panel_info</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;__notebook_&#39;</span> <span class="ow">in</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="s1">&#39;AuiNotebook&#39;</span> <span class="ow">in</span> <span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]:</span>
                    <span class="n">panel_info_dict</span><span class="p">[</span><span class="s1">&#39;notebook_list&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">panel_info</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">panel_info_dict</span><span class="p">[</span><span class="n">panel_info</span><span class="p">[</span><span class="s1">&#39;caption&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">panel_info</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">panel_info_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">panel_info</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">panel_info_dict</span>

<div class="viewcode-block" id="PanelManager.GetSelectedLayout"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetSelectedLayout">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get selected layout</span>

<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span><span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span><span class="p">]))</span></div>

<div class="viewcode-block" id="PanelManager.GetLayoutNames"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetLayoutNames">[docs]</a>    <span class="k">def</span> <span class="nf">GetLayoutNames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of names of registered layouts.</span>

<span class="sd">        :rtype: Tuple[str, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanelManager.GetLayoutList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.GetLayoutList">[docs]</a>    <span class="k">def</span> <span class="nf">GetLayoutList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the list of registered layouts.</span>

<span class="sd">        :rtype: Tuple[str, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">([(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span></div>

<div class="viewcode-block" id="PanelManager.LoadLayout"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.LoadLayout">[docs]</a>    <span class="k">def</span> <span class="nf">LoadLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Places it in the layout with the specified name.</span>

<span class="sd">        :type name: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">perspective</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">panel_info_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ConvertPanelInfoDict</span><span class="p">(</span><span class="n">perspective</span><span class="p">)</span>

        <span class="n">panel_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">pane</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetAllPanes</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DetachPane</span><span class="p">(</span><span class="n">pane</span><span class="p">)</span>

        <span class="c1"># for panel in panel_list:</span>
        <span class="c1">#     panel_info = panel_info_dict.get(panel.__class__.__name__)</span>

        <span class="c1">#     if panel_info is None:</span>
        <span class="c1">#         continue</span>

        <span class="c1">#     aui_info = AuiPaneInfo()</span>
        <span class="c1">#     aui_info.Caption(panel_info[&#39;caption&#39;])</span>
        <span class="c1">#     aui_info.SetFlag(panel_info[&#39;state&#39;], True)</span>
        <span class="c1">#     aui_info.Layer(panel_info[&#39;layer&#39;])</span>
        <span class="c1">#     aui_info.Direction(panel_info[&#39;dir&#39;])</span>
        <span class="c1">#     aui_info.Row(panel_info[&#39;row&#39;])</span>
        <span class="c1">#     aui_info.Position(panel_info[&#39;pos&#39;])</span>
        <span class="c1">#     aui_info.BestSize(panel_info[&#39;bestw&#39;], panel_info[&#39;besth&#39;])</span>
        <span class="c1">#     aui_info.MinSize(panel_info[&#39;minw&#39;], panel_info[&#39;minh&#39;])</span>
        <span class="c1">#     aui_info.MaxSize(panel_info[&#39;maxw&#39;], panel_info[&#39;maxh&#39;])</span>
        <span class="c1">#     aui_info.FloatingSize((panel_info[&#39;floatw&#39;], panel_info[&#39;floath&#39;]))</span>

        <span class="c1">#     aui_info.MaximizeButton().PinButton().CloseButton().NotebookDockable(False)</span>

        <span class="c1">#     self.AddPane(panel, panel_info)</span>

        <span class="c1"># self.DoFrameLayout()</span>
        <span class="c1"># self.Repaint()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

        <span class="n">prev_layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">LayoutChangeEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span><span class="p">,</span> <span class="n">prev_layout</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanelManager.RegisterCurrentLayout"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.RegisterCurrentLayout">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterCurrentLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register the current layout.</span>

<span class="sd">        :param name: layout name</span>
<span class="sd">        :type name: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prev_layout_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLayoutList</span><span class="p">()</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SavePerspective</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">layout_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLayoutList</span><span class="p">()</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">LayoutRegisterEvent</span><span class="p">(</span><span class="n">layout_list</span><span class="p">,</span> <span class="n">prev_layout_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanelManager.RegisterLayout"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.RegisterLayout">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">operand</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register the layout.</span>

<span class="sd">        :param layout: Tuples of names and perspectives. Please Refer to wxPython (https://docs.wxpython.org/wx.lib.agw.aui.framemanager.AuiManager.html#wx.lib.agw.aui.framemanager.AuiManager.SavePerspective) for detail of Perspective.</span>
<span class="sd">        :type layout: Tuple[str, str]</span>
<span class="sd">        :param operand: [description], defaults to None</span>
<span class="sd">        :type operand: str, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="p">(</span><span class="n">layout</span><span class="p">,)</span>

        <span class="n">layout_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">layout</span><span class="p">:</span>
            <span class="n">layout_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">prev_layout_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLayoutList</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">operand</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span> <span class="o">=</span> <span class="n">layout_dict</span>
        <span class="k">elif</span> <span class="n">operand</span> <span class="o">==</span> <span class="s1">&#39;|&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">layout_dict</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">operand</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">layout_dict</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__layout_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="n">layout_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetLayoutList</span><span class="p">()</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">LayoutRegisterEvent</span><span class="p">(</span><span class="n">layout_list</span><span class="p">,</span> <span class="n">prev_layout_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__SendPanelSelectionChangeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">panel</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">panel</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">PanelSelectionChangeEvent</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span> <span class="o">=</span> <span class="n">panel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">EVENT_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

<div class="viewcode-block" id="PanelManager.OnGripperClicked"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.OnGripperClicked">[docs]</a>    <span class="k">def</span> <span class="nf">OnGripperClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pane_window</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when a panel is clicked and notify the &quot;PanelSelectionChangeEvent&quot;. Please refer to wxPython (https://docs.wxpython.org/wx.lib.agw.aui.framemanager.AuiManager.html#wx.lib.agw.aui.framemanager.AuiManager.OnGripperClicked) for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">FindWindowToAncestors</span><span class="p">(</span><span class="n">pane_window</span><span class="p">,</span> <span class="n">PanelBase</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SendPanelSelectionChangeEvent</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">OnGripperClicked</span><span class="p">(</span><span class="n">pane_window</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span></div>

    <span class="c1"># def OnChildFocus(self, event):</span>
    <span class="c1">#     event.Skip()</span>
    <span class="c1">#     panel = FindWindowToAncestors(event.Window, PanelBase)</span>
    <span class="c1">#     self.__SendPanelSelectionChangeEvent(panel)</span>
    <span class="c1">#     return super().OnChildFocus(event)</span>

    <span class="k">def</span> <span class="nf">__SendPanelHideEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">panel_list</span><span class="p">):</span>
        <span class="n">menubar_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MENUBAR_MANAGER</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">panel_list</span><span class="p">:</span>
            <span class="n">menubar_mgr</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">GetShowPanelLabel</span><span class="p">(</span><span class="n">panel</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">PanelViewEvent</span><span class="p">(</span><span class="n">hide_panel_list</span><span class="o">=</span><span class="n">panel_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

<div class="viewcode-block" id="PanelManager.OnFloatingPaneClosed"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.OnFloatingPaneClosed">[docs]</a>    <span class="k">def</span> <span class="nf">OnFloatingPaneClosed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wnd</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when a floating panel is closed and notify the &quot;PanelViewEvent&quot; Please refer to wxPython (https://docs.wxpython.org/wx.lib.agw.aui.framemanager.AuiManager.html#wx.lib.agw.aui.framemanager.AuiManager.OnFloatingPaneClosed) for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SendPanelHideEvent</span><span class="p">([</span><span class="n">wnd</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">OnFloatingPaneClosed</span><span class="p">(</span><span class="n">wnd</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanelManager.OnPaneButton"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.OnPaneButton">[docs]</a>    <span class="k">def</span> <span class="nf">OnPaneButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when button on tho top of panel is pushed and notify the &quot;PanelViewEvent&quot;  Please refer to wxPython (https://docs.wxpython.org/wx.lib.agw.aui.framemanager.AuiManager.html#wx.lib.agw.aui.framemanager.AuiManager.OnFloatingPaneClosed) for details.</span>

<span class="sd">        :param event: [description]</span>
<span class="sd">        :type event: [type]</span>
<span class="sd">        :return: [description]</span>
<span class="sd">        :rtype: [type]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetButton</span><span class="p">()</span> <span class="o">==</span> <span class="n">AUI_BUTTON_CLOSE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__SendPanelHideEvent</span><span class="p">([</span><span class="n">event</span><span class="o">.</span><span class="n">GetPane</span><span class="p">()</span><span class="o">.</span><span class="n">window</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">OnPaneButton</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="c1"># def LoadLayout(self, layout):</span>
    <span class="c1">#     pass</span>

    <span class="c1"># def SaveLayout(self):</span>
    <span class="c1">#     layout = {</span>
    <span class="c1">#         &#39;notebooklist&#39;: []</span>
    <span class="c1">#     }</span>
    <span class="c1">#     queue = deque()</span>
    <span class="c1">#     notebook_idx = -1</span>
    <span class="c1">#     for dock in self._docks:</span>
    <span class="c1">#         for pane in dock.panes:</span>
    <span class="c1">#             queue.append((pane, notebook_idx))</span>

    <span class="c1">#     while len(queue) != 0:</span>
    <span class="c1">#         pane, idx = queue.popleft()</span>
    <span class="c1">#         window = pane.window</span>

    <span class="c1">#         if isinstance(window, AuiNotebook):</span>
    <span class="c1">#             for pane in [window.GetPage(i) for i in range(window.GetPageCount())]:</span>
    <span class="c1">#                 queue.append((pane, notebook_idx))</span>

    <span class="c1">#             notebook_idx += 1</span>
    <span class="c1">#             layout[&#39;notebooklist&#39;].append(idx)</span>

    <span class="c1">#         layout[window.__class__.__name__] = {</span>
    <span class="c1">#             &#39;notebook_idx&#39;: notebook_idx,</span>
    <span class="c1">#             &#39;info&#39;: self.SavePaneInfo(pane)</span>
    <span class="c1">#         }</span>

    <span class="c1">#     print(layout)</span>

<div class="viewcode-block" id="PanelManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PanelManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PANEL_SELECTION_CHANGE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_panel</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPanel</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PANEL_VIEW</span><span class="p">:</span>
            <span class="n">menubar_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MENUBAR_MANAGER</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetShowPanelList</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ShowPane</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
                <span class="n">menubar_mgr</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">GetShowPanelLabel</span><span class="p">(</span><span class="n">panel</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetHidePanelList</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">HidePane</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
                <span class="n">menubar_mgr</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">GetShowPanelLabel</span><span class="p">(</span><span class="n">panel</span><span class="p">),</span> <span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PANEL_REGISTER</span><span class="p">:</span>
            <span class="n">panel_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">panel_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="n">panel_list</span><span class="p">:</span>
                <span class="n">aui_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__CreateAuiPaneInfo</span><span class="p">(</span><span class="n">panel</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">SpectrumPanel</span><span class="p">):</span>
                    <span class="n">aui_info</span> <span class="o">=</span> <span class="n">aui_info</span><span class="o">.</span><span class="n">CenterPane</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">AddPane</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span> <span class="n">aui_info</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__panel_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">:</span> <span class="n">panel</span> <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">()}</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="c1"># notebook_count = 0</span>
            <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPanelList</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">DotChain</span><span class="p">(</span><span class="n">panel</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">SHOW</span><span class="p">),</span> <span class="n">panel</span><span class="o">.</span><span class="n">Shown</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">SELECTED_LAYOUT</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_layout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SavePerspective</span><span class="p">()))</span></div></div>


<div class="viewcode-block" id="FunctionManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager">[docs]</a><span class="k">class</span> <span class="nc">FunctionManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager for function and preset</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_spectrum_func_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_mapping_func</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="FunctionManager.GetFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetFunction">[docs]</a>    <span class="k">def</span> <span class="nf">GetFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FunctionContainerBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the function specified by name. This value is deepcopied.</span>

<span class="sd">        :param name: Class name of function.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :rtype: FunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="FunctionManager.GetFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">FunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[FunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetPeakFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetPeakFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeakFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">PeakFunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered peak functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[PeakFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetPeakFunctionList</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetDecodeFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetDecodeFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetDecodeFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DecodeFunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered decode functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[DecodeFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetDecodeFunctionList</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetEncodeFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetEncodeFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetEncodeFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EncodeFunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered encode functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[EncodeFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetEncodeFunctionList</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetSpectrumFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetSpectrumFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetSpectrumFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SpectrumFunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered spectrum functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[SpectrumFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetSpectrumFunctionList</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetMappingFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetMappingFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetMappingFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">MappingFunctionContainerBase</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered mapping functions. This value is deepcopied.</span>

<span class="sd">        :rtype: List[MappingFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetMappingFunctionList</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">__GetFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__GetPeakFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">PeakFunctionContainerBase</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">__GetDecodeFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">__GetEncodeFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">__GetSpectrumFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">__GetMappingFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetFunctionList</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">MappingFunctionContainerBase</span><span class="p">)]</span>

<div class="viewcode-block" id="FunctionManager.GetSelectedDecodeFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetSelectedDecodeFunction">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedDecodeFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected decode function. This value is deepcopied.</span>

<span class="sd">        :rtype: DecodeFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.GetSelectedEncodeFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetSelectedEncodeFunction">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedEncodeFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected encode function. This value is deepcopied.</span>

<span class="sd">        :rtype: EncodeFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.GetSelectedSpectrumFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetSelectedSpectrumFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedSpectrumFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected spectrum function. This value is deepcopied.</span>

<span class="sd">        :rtype: SpectrumFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_spectrum_func_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.GetSelectedMappingFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetSelectedMappingFunction">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedMappingFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MappingFunctionContainerBase</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected mapping function. This value is deepcopied.</span>

<span class="sd">        :rtype: MappingFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_mapping_func</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.RegisterFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.RegisterFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_list</span><span class="p">:</span> <span class="n">FunctionContainerBase</span><span class="p">,</span> <span class="n">is_register</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register or deregister a list of functions.</span>

<span class="sd">        :type function_list: FunctionContainerBase</span>
<span class="sd">        :param is_register: If True, register, if False, deregister., defaults to True</span>
<span class="sd">        :type is_register: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="n">function_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">function_list</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">FunctionContainerBase</span><span class="p">)</span> <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__RegisterFunctionList</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="n">is_register</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__Set2FunctionDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_list</span><span class="p">,</span> <span class="n">is_register</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">key</span> <span class="o">:=</span> <span class="n">function</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">is_register</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">function</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__function_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__RegisterFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_list</span><span class="p">,</span> <span class="n">is_register</span><span class="p">):</span>
        <span class="n">prev_peak_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPeakFunctionList</span><span class="p">()</span>
        <span class="n">prev_encode_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetEncodeFunctionList</span><span class="p">()</span>
        <span class="n">prev_decode_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDecodeFunctionList</span><span class="p">()</span>
        <span class="n">prev_spectrum_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetSpectrumFunctionList</span><span class="p">()</span>
        <span class="n">prev_mapping_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetMappingFunctionList</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__Set2FunctionDict</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="n">is_register</span><span class="p">)</span>

        <span class="n">peak_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPeakFunctionList</span><span class="p">()</span>
        <span class="n">encode_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetEncodeFunctionList</span><span class="p">()</span>
        <span class="n">decode_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDecodeFunctionList</span><span class="p">()</span>
        <span class="n">spectrum_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetSpectrumFunctionList</span><span class="p">()</span>
        <span class="n">mapping_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetMappingFunctionList</span><span class="p">()</span>

        <span class="n">event_design</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">PeakFunctionRegisterEvent</span><span class="p">,</span> <span class="n">PeakFunctionDeregisterEvent</span><span class="p">,</span> <span class="n">peak_func_list</span><span class="p">,</span> <span class="n">prev_peak_func_list</span><span class="p">),</span>
            <span class="p">(</span><span class="n">EncodeFunctionRegisterEvent</span><span class="p">,</span> <span class="n">EncodeFunctionDeregisterEvent</span><span class="p">,</span> <span class="n">encode_func_list</span><span class="p">,</span> <span class="n">prev_encode_func_list</span><span class="p">),</span>
            <span class="p">(</span><span class="n">DecodeFunctionRegisterEvent</span><span class="p">,</span> <span class="n">DecodeFunctionDeregisterEvent</span><span class="p">,</span> <span class="n">decode_func_list</span><span class="p">,</span> <span class="n">prev_decode_func_list</span><span class="p">),</span>
            <span class="p">(</span><span class="n">SpectrumFunctionRegisterEvent</span><span class="p">,</span> <span class="n">SpectrumFunctionDeregisterEvent</span><span class="p">,</span> <span class="n">spectrum_func_list</span><span class="p">,</span> <span class="n">prev_spectrum_func_list</span><span class="p">),</span>
            <span class="p">(</span><span class="n">MappingFunctionRegisterEvent</span><span class="p">,</span> <span class="n">MappingFunctionDeregisterEvent</span><span class="p">,</span> <span class="n">mapping_func_list</span><span class="p">,</span> <span class="n">prev_mapping_func_list</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">RegisterEvent</span><span class="p">,</span> <span class="n">DeregisterEvent</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">prev_value</span> <span class="ow">in</span> <span class="n">event_design</span><span class="p">:</span>
            <span class="n">Event</span> <span class="o">=</span> <span class="n">RegisterEvent</span> <span class="k">if</span> <span class="n">is_register</span> <span class="k">else</span> <span class="n">DeregisterEvent</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">prev_value</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

<div class="viewcode-block" id="FunctionManager.SelectEncodeFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.SelectEncodeFunction">[docs]</a>    <span class="k">def</span> <span class="nf">SelectEncodeFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select the encode function.</span>

<span class="sd">        :type function: EncodeFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">EncodeFunctionContainerBase</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_function</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span> <span class="o">=</span> <span class="n">function</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">EncodeFunctionSelectEvent</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">prev_function</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.SelectDecodeFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.SelectDecodeFunction">[docs]</a>    <span class="k">def</span> <span class="nf">SelectDecodeFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select the decode function.</span>

<span class="sd">        :type function: DecodeFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">DecodeFunctionContainerBase</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_function</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span> <span class="o">=</span> <span class="n">function</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DecodeFunctionSelectEvent</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">prev_function</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.SelectSpectrumFunctionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.SelectSpectrumFunctionList">[docs]</a>    <span class="k">def</span> <span class="nf">SelectSpectrumFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">SpectrumFunctionContainerBase</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the list of spectrum functions.</span>

<span class="sd">        :type function_list: Iterable[SpectrumFunctionContainerBase]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__FormatFunctionList</span><span class="p">(</span><span class="n">function_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">SpectrumFunctionContainerBase</span><span class="p">)</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">func_list</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_spectrum_func_list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_spectrum_func_list</span> <span class="o">=</span> <span class="n">func_list</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">SpectrumFunctionListSelectEvent</span><span class="p">(</span><span class="n">func_list</span><span class="p">,</span> <span class="n">prev_func_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.SelectMappingFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.SelectMappingFunction">[docs]</a>    <span class="k">def</span> <span class="nf">SelectMappingFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="n">MappingFunctionContainerBase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select the decode function.</span>

<span class="sd">        :type function: MappingFunctionContainerBase</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">MappingFunctionContainerBase</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_function</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_mapping_func</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_mapping_func</span> <span class="o">=</span> <span class="n">function</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">MappingFunctionSelectEvent</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">prev_function</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__FormatFunctionList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">function_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">(</span><span class="n">function_list</span><span class="p">)]</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">FunctionContainerBase</span><span class="p">)</span> <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">]):</span>
                <span class="n">function_list</span> <span class="o">=</span> <span class="n">function_list</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">]):</span>
                <span class="n">function_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">function_list</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="n">FunctionContainerBase</span><span class="p">):</span>
            <span class="n">function_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">function_list</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">function_list</span>

<div class="viewcode-block" id="FunctionManager.GetPreset"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetPreset">[docs]</a>    <span class="k">def</span> <span class="nf">GetPreset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Preset</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get a preset with the specified name. This value is deepcopied.</span>

<span class="sd">        :type name: str</span>
<span class="sd">        :rtype: Preset</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="FunctionManager.GetPresetNames"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetPresetNames">[docs]</a>    <span class="k">def</span> <span class="nf">GetPresetNames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of names of registered presets.</span>

<span class="sd">        :rtype: Tuple[str]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="FunctionManager.GetPresetList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.GetPresetList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPresetList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Preset</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered presets. This value is deepcopied.</span>

<span class="sd">        :rtype: List[Preset]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetPresetList</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">__GetPresetList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

<div class="viewcode-block" id="FunctionManager.SelectSpectrumPreset"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.SelectSpectrumPreset">[docs]</a>    <span class="k">def</span> <span class="nf">SelectSpectrumPreset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Preset</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the registered Spectrum Preset.</span>

<span class="sd">        :param preset: preset name or instance of Preset</span>
<span class="sd">        :type preset: Union[str, Preset]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">preset_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__FormatPresetList</span><span class="p">(</span><span class="n">preset</span><span class="p">)</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">:</span>
            <span class="n">func_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">func</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">preset</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">SelectSpectrumFunctionList</span><span class="p">(</span><span class="n">func_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="FunctionManager.RegisterPreset"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.RegisterPreset">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterPreset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset</span><span class="p">:</span> <span class="n">Preset</span><span class="p">,</span> <span class="n">is_register</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register the presets.</span>

<span class="sd">        :type preset: Preset</span>
<span class="sd">        :param is_register: If True, register, if False, deregister., defaults to True</span>
<span class="sd">        :type is_register: bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prev_preset_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPresetList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__FormatPresetList</span><span class="p">(</span><span class="n">preset</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">is_register</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="p">[</span><span class="n">preset</span><span class="o">.</span><span class="n">GetName</span><span class="p">()]</span> <span class="o">=</span> <span class="n">preset</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="p">[</span><span class="n">preset</span><span class="o">.</span><span class="n">GetName</span><span class="p">()]</span>
        <span class="n">preset_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPresetList</span><span class="p">()</span>

        <span class="n">Event</span> <span class="o">=</span> <span class="n">PresetRegisterEvent</span> <span class="k">if</span> <span class="n">is_register</span> <span class="k">else</span> <span class="n">PresetDeregisterEvent</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="n">preset_list</span><span class="p">,</span> <span class="n">prev_preset_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__FormatPresetList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preset_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">preset_list</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">preset_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">preset_list</span><span class="p">)]</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">preset_list</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">preset</span><span class="p">,</span> <span class="n">Preset</span><span class="p">)</span> <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">]):</span>
                <span class="n">preset_list</span> <span class="o">=</span> <span class="n">preset_list</span>
            <span class="k">elif</span> <span class="nb">all</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">preset</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">]):</span>
                <span class="n">preset_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">preset</span><span class="p">)</span> <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="ne">TypeError</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">preset_list</span><span class="p">,</span> <span class="n">Preset</span><span class="p">):</span>
            <span class="n">preset_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">preset_list</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">preset_list</span>

<div class="viewcode-block" id="FunctionManager.IsRegisteredPresetName"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.IsRegisteredPresetName">[docs]</a>    <span class="k">def</span> <span class="nf">IsRegisteredPresetName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns True if the specified name has been registered.</span>

<span class="sd">        :param name: name of preset</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span></div>

<div class="viewcode-block" id="FunctionManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.FunctionManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_ENCODE_FUNCTION_SELECT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DECODE_FUNCTION_SELECT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunction</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_SPECTRUM_FUNCTION_LIST_SELECT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_spectrum_func_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">wxEVT_ENCODE_FUNCTION_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_DECODE_FUNCTION_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_SPECTRUM_FUNCTION_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_PEAK_FUNCTION_REGISTER</span><span class="p">,</span> <span class="n">wxEVT_MAPPING_FUNCTION_REGISTER</span><span class="p">]:</span>
            <span class="n">function_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__Set2FunctionDict</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">wxEVT_ENCODE_FUNCTION_DEREGISTER</span><span class="p">,</span> <span class="n">wxEVT_DECODE_FUNCTION_DEREGISTER</span><span class="p">,</span> <span class="n">wxEVT_SPECTRUM_FUNCTION_DEREGISTER</span><span class="p">,</span> <span class="n">wxEVT_PEAK_FUNCTION_DEREGISTER</span><span class="p">,</span> <span class="n">wxEVT_MAPPING_FUNCTION_DEREGISTER</span><span class="p">]:</span>
            <span class="n">function_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetFunctionList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__Set2FunctionDict</span><span class="p">(</span><span class="n">function_list</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PRESET_REGISTER</span><span class="p">:</span>
            <span class="n">preset_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPresetList</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="p">[</span><span class="n">preset</span><span class="o">.</span><span class="n">GetName</span><span class="p">()]</span> <span class="o">=</span> <span class="n">preset</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PRESET_DEREGISTER</span><span class="p">:</span>
            <span class="n">preset_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPresetList</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">preset</span> <span class="ow">in</span> <span class="n">preset_list</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__preset_dict</span><span class="p">[</span><span class="n">preset</span><span class="o">.</span><span class="n">GetName</span><span class="p">()]</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">design</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">SELECTED_ENCODE_FUNCTION</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_encode_func</span><span class="p">),</span>
                <span class="p">(</span><span class="n">SELECTED_DECODE_FUNCTION</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_decode_func</span><span class="p">),</span>
                <span class="p">(</span><span class="n">SPECTRUM_FUNCTION_PRESET_LIST</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetPresetList</span><span class="p">()),</span>
                <span class="p">(</span><span class="n">SELECTED_MAPPING_FUNCTION</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_mapping_func</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ProjectManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager">[docs]</a><span class="k">class</span> <span class="nc">ProjectManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager for project</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__is_saved</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">()</span>

<div class="viewcode-block" id="ProjectManager.GetProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.GetProject">[docs]</a>    <span class="k">def</span> <span class="nf">GetProject</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Project</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get project</span>

<span class="sd">        :rtype: Project</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__project</span></div>

<div class="viewcode-block" id="ProjectManager.NewProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.NewProject">[docs]</a>    <span class="k">def</span> <span class="nf">NewProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">DataContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Create a new project.</span>

<span class="sd">        :type data_list: Iterable[DataContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">HasValidElement</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">DataContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">peak_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PEAK_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSelectedPeakType</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ProjectNewEvent</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectManager.OpenProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.OpenProject">[docs]</a>    <span class="k">def</span> <span class="nf">OpenProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load an existing project.</span>

<span class="sd">        :type path: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectStarted</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectSaved</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">MessageDialog</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Project changes will not be saved.&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">OK</span> <span class="o">|</span> <span class="n">CANCEL</span> <span class="o">|</span> <span class="n">ICON_INFORMATION</span> <span class="o">|</span> <span class="n">CENTRE</span><span class="p">)</span> <span class="k">as</span> <span class="n">dialog</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">ID_CANCEL</span><span class="p">:</span>
                    <span class="k">return</span>

        <span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">OpenProject</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span> <span class="o">=</span> <span class="n">project</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
        <span class="n">peak_type</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
        <span class="n">experimental_date</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetExperimentalDate</span><span class="p">()</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ProjectOpenEvent</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">experimental_date</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectManager.SaveProject"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.SaveProject">[docs]</a>    <span class="k">def</span> <span class="nf">SaveProject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">:</span> <span class="n">Project</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Save the project.</span>

<span class="sd">        :param project: If project is None, Save the managed by this class. Defaults to None</span>
<span class="sd">        :type project: Project, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectStarted</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectSaved</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">project</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetProject</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">Project</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
        <span class="n">peak_type</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
        <span class="n">experimental_date</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">GetExperimentalDate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ProjectSaveEvent</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data_list</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">experimental_date</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SaveProject</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectManager.SetProjectMemo"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.SetProjectMemo">[docs]</a>    <span class="k">def</span> <span class="nf">SetProjectMemo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experimental_date</span><span class="p">:</span> <span class="n">date</span><span class="p">,</span> <span class="n">note</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the memo for the project.</span>

<span class="sd">        :param experimental_date: Date of Experiment</span>
<span class="sd">        :type experimental_date: date</span>
<span class="sd">        :param note: Notes on the project</span>
<span class="sd">        :type note: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prev_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">GetExperimentalDate</span><span class="p">()</span>
        <span class="n">prev_note</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetExperimentalDate</span><span class="p">(</span><span class="n">experimental_date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetNote</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ProjectMemoChangeEvent</span><span class="p">(</span><span class="n">experimental_date</span><span class="p">,</span> <span class="n">prev_date</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">prev_note</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProjectManager.IsProjectStarted"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.IsProjectStarted">[docs]</a>    <span class="k">def</span> <span class="nf">IsProjectStarted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns True if the project has been started</span>

<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">())</span> <span class="o">!=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="ProjectManager.IsProjectSaved"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.IsProjectSaved">[docs]</a>    <span class="k">def</span> <span class="nf">IsProjectSaved</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns True if the project has saved the most recent state.</span>

<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__is_saved</span></div>

<div class="viewcode-block" id="ProjectManager.AskProjectSaving"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.AskProjectSaving">[docs]</a>    <span class="k">def</span> <span class="nf">AskProjectSaving</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Ask if the project needs to be saved.</span>

<span class="sd">        :return: Whether the operation is complete or not.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectStarted</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsProjectSaved</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">SaveCheckDialog</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Info&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dialog</span><span class="p">:</span>
                <span class="n">dialog</span><span class="o">.</span><span class="n">Center</span><span class="p">()</span>
                <span class="n">id_</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">id_</span> <span class="o">==</span> <span class="n">ID_CANCEL</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="k">elif</span> <span class="n">id_</span> <span class="o">==</span> <span class="n">ID_SAVE</span><span class="p">:</span>
                <span class="n">is_saved</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MENUBAR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">ExecuteMenuFunction</span><span class="p">(</span><span class="n">SAVE_MENU_ITEM</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">is_saved</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">SaveProject</span><span class="p">()</span>

        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="ProjectManager.GetDefaultProjectPath"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.GetDefaultProjectPath">[docs]</a>    <span class="k">def</span> <span class="nf">GetDefaultProjectPath</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the default project name.</span>

<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">join</span><span class="p">(</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">NEW_PROJECT_NAME</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__SetIsProjectSaved</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_saved</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__is_saved</span> <span class="o">=</span> <span class="n">is_saved</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">GetFileName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SetTitle</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="ProjectManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ProjectManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PROJECT_NEW</span><span class="p">:</span>
            <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>

            <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PROJECT_OPEN</span><span class="p">:</span>
            <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>

            <span class="n">note</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetNote</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

            <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PROJECT_SAVE</span><span class="p">:</span>
            <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>

            <span class="n">note</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetNote</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

            <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>

            <span class="c1"># Eventがパネルに飛ぶ通達される前に実行されちゃう</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SaveProject</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PROJECT_MEMO_CHANGE</span><span class="p">:</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetExperimentalData</span><span class="p">()</span>
            <span class="n">note</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetNote</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetExperimentalDate</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__project</span><span class="o">.</span><span class="n">SetNote</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DATA_CONTENTS_CHANGE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__SetIsProjectSaved</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PeakManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager">[docs]</a><span class="k">class</span> <span class="nc">PeakManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager related to peak.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="PeakManager.GetPeakType"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.GetPeakType">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeakType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PeakType</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the peak type specified by name. This value is deepcopied.</span>

<span class="sd">        :param name: class name of peak type.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :rtype: PeakType</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="PeakManager.SelectPeakType"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.SelectPeakType">[docs]</a>    <span class="k">def</span> <span class="nf">SelectPeakType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">:</span> <span class="n">PeakType</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select Peak Type</span>

<span class="sd">        :type peak_type: PeakType</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">peak_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;select peak_type is None&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peak_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">peak_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peak_type</span><span class="p">,</span> <span class="n">PeakType</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_peak_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MENUBAR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">peak_type</span><span class="o">.</span><span class="n">GetName</span><span class="p">())</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">PeakTypeChangeEvent</span><span class="p">(</span><span class="n">peak_type</span><span class="p">,</span> <span class="n">prev_peak_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">spectrum_func_instance</span> <span class="ow">in</span> <span class="n">SpectrumFunctionContainerBase</span><span class="o">.</span><span class="n">_instance_list</span><span class="p">:</span>
            <span class="n">spectrum_func_instance</span><span class="o">.</span><span class="n">OnPeakTypeChanged</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PeakManager.GetSelectedPeakType"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.GetSelectedPeakType">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedPeakType</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PeakType</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get selected type of peak.</span>

<span class="sd">        :rtype: PeakType</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span></div>

<div class="viewcode-block" id="PeakManager.RegisterPeakTypeList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.RegisterPeakTypeList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterPeakTypeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peak_type_list</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">PeakType</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">PeakType</span><span class="p">]]):</span>
        <span class="sd">&quot;&quot;&quot;Register the peak type.</span>

<span class="sd">        :type peak_type_list: Union[PeakType, Iterable[PeakType]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">peak_type_list</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
            <span class="n">peak_type_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">peak_type_list</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peak_type</span><span class="p">,</span> <span class="n">PeakType</span><span class="p">)</span> <span class="k">for</span> <span class="n">peak_type</span> <span class="ow">in</span> <span class="n">peak_type_list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_peak_type_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">peak_type</span> <span class="ow">in</span> <span class="n">peak_type_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">peak_name</span> <span class="o">:=</span> <span class="n">peak_type</span><span class="o">.</span><span class="n">GetName</span><span class="p">())</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="p">[</span><span class="n">peak_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">peak_type</span>

        <span class="n">peak_type_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">PeakTypeRegisterEvent</span><span class="p">(</span><span class="n">peak_type_list</span><span class="p">,</span> <span class="n">prev_peak_type_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PeakManager.GetPeakTypeNames"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.GetPeakTypeNames">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeakTypeNames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered peak type names.</span>

<span class="sd">        :rtype: Tuple[str, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="PeakManager.GetPeakTypeList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.GetPeakTypeList">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeakTypeList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PeakType</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered peak types.</span>

<span class="sd">        :rtype: Tuple[PeakType, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">__GetProject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PROJECT_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetProject</span><span class="p">()</span>

<div class="viewcode-block" id="PeakManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PeakManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PROJECT_NEW</span><span class="p">:</span>
            <span class="n">peak_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedPeakType</span><span class="p">()</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">PeakTypeChangeEvent</span><span class="p">(</span><span class="n">peak_type</span><span class="p">,</span> <span class="n">peak_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PEAK_TYPE_CHANGE</span><span class="p">:</span>
            <span class="n">peak_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakType</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span><span class="o">.</span><span class="n">SetPeakType</span><span class="p">(</span><span class="n">peak_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">MENUBAR_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">CheckMenuItem</span><span class="p">(</span><span class="n">peak_type</span><span class="o">.</span><span class="n">GetName</span><span class="p">())</span>

            <span class="k">for</span> <span class="n">spectrum_func_instance</span> <span class="ow">in</span> <span class="n">SpectrumFunctionContainerBase</span><span class="o">.</span><span class="n">_instance_list</span><span class="p">:</span>
                <span class="n">spectrum_func_instance</span><span class="o">.</span><span class="n">OnPeakTypeChanged</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PEAK_TYPE_REGISTER</span><span class="p">:</span>
            <span class="n">peak_type_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPeakTypeList</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">peak_type</span> <span class="ow">in</span> <span class="n">peak_type_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">peak_name</span> <span class="o">:=</span> <span class="n">peak_type</span><span class="o">.</span><span class="n">GetName</span><span class="p">())</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__peak_type_dict</span><span class="p">[</span><span class="n">peak_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">peak_type</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">design</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">PEAK_TYPE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedPeakType</span><span class="p">()),</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DataManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager">[docs]</a><span class="k">class</span> <span class="nc">DataManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manage references and selections about data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="nb">set</span><span class="p">(),</span> <span class="nb">set</span><span class="p">()],</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__GetProject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PROJECT_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetProject</span><span class="p">()</span>

<div class="viewcode-block" id="DataManager.GetData"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetData">[docs]</a>    <span class="k">def</span> <span class="nf">GetData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the data specified by the index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: DataContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span></div>

<div class="viewcode-block" id="DataManager.SetData"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.SetData">[docs]</a>    <span class="k">def</span> <span class="nf">SetData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">DataContainer</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set to the data specified by the index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :type data: DataContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">([</span><span class="n">index</span><span class="p">],</span> <span class="p">[</span><span class="n">data</span><span class="p">])</span></div>

<div class="viewcode-block" id="DataManager.GetDataList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetDataList">[docs]</a>    <span class="k">def</span> <span class="nf">GetDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DataContainer</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the data specified in the list of indexes. If index_list is None, returns the all data list. This value is deepcopied.</span>

<span class="sd">        :type index_list: Iterable[int], optional</span>
<span class="sd">        :rtype: List[DataContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="n">data_list</span> <span class="k">if</span> <span class="n">index_list</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="n">data_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">index_list</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.SetDataList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.SetDataList">[docs]</a>    <span class="k">def</span> <span class="nf">SetDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">data_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">DataContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Sets the list of data corresponding to the specified list of indexes.</span>

<span class="sd">        :type index_list: Iterable[int]</span>
<span class="sd">        :type data_list: Iterable[DataContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">DataContainer</span><span class="p">)</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span>
        <span class="n">project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">index_list</span><span class="p">)</span>
        <span class="n">x_changed_list</span> <span class="o">=</span> <span class="n">y_changed_list</span> <span class="o">=</span> <span class="n">bg_changed_list</span> <span class="o">=</span> <span class="n">peaks_changed_list</span> <span class="o">=</span> <span class="n">recipe_changed_list</span> <span class="o">=</span> <span class="n">msg_changed_list</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">DataContentsChangeEvent</span><span class="p">(</span><span class="n">index_list</span><span class="p">,</span> <span class="n">data_list</span><span class="p">,</span> <span class="n">x_changed_list</span><span class="p">,</span> <span class="n">y_changed_list</span><span class="p">,</span> <span class="n">bg_changed_list</span><span class="p">,</span> <span class="n">peaks_changed_list</span><span class="p">,</span> <span class="n">recipe_changed_list</span><span class="p">,</span> <span class="n">msg_changed_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__GetDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>

<div class="viewcode-block" id="DataManager.GetX"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetX">[docs]</a>    <span class="k">def</span> <span class="nf">GetX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the x data of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: ndarray</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">X</span></div>

<div class="viewcode-block" id="DataManager.GetY"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetY">[docs]</a>    <span class="k">def</span> <span class="nf">GetY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the y data of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: ndarray</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Y</span></div>

<div class="viewcode-block" id="DataManager.GetXY"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetXY">[docs]</a>    <span class="k">def</span> <span class="nf">GetXY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the data of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: Tuple[ndarray, ndarray]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">XY</span></div>

<div class="viewcode-block" id="DataManager.GetBackground"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetBackground">[docs]</a>    <span class="k">def</span> <span class="nf">GetBackground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the background of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: ndarray</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">BackGround</span></div>

<div class="viewcode-block" id="DataManager.GetPeaks"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetPeaks">[docs]</a>    <span class="k">def</span> <span class="nf">GetPeaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PeakFunctionContainerList</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the peaks of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: PeakFunctionContainerList</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Peaks</span></div>

<div class="viewcode-block" id="DataManager.GetRecipe"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetRecipe">[docs]</a>    <span class="k">def</span> <span class="nf">GetRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Recipe</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the recipe for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: Recipe</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Recipe</span></div>

<div class="viewcode-block" id="DataManager.GetSelectedRecipe"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetSelectedRecipe">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Recipe</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the selected recipe.</span>

<span class="sd">        :rtype: Recipe</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_recipe</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.SelectRecipe"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.SelectRecipe">[docs]</a>    <span class="k">def</span> <span class="nf">SelectRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipe</span><span class="p">:</span> <span class="n">Recipe</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select a recipe.</span>

<span class="sd">        :type recipe: Recipe</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">Recipe</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_recipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selected_recipe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_recipe</span> <span class="o">=</span> <span class="n">recipe</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">RecipeSelectEvent</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">prev_recipe</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.ApplyRecipe"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.ApplyRecipe">[docs]</a>    <span class="k">def</span> <span class="nf">ApplyRecipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recipe</span><span class="p">:</span> <span class="n">Recipe</span><span class="p">,</span> <span class="n">index_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Applies a recipe.</span>

<span class="sd">        :type recipe: Recipe</span>
<span class="sd">        :param index_list: Applies a recipe to the specified list of indexes. Defaults to None</span>
<span class="sd">        :type index_list: Iterable[int], optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recipe</span><span class="p">,</span> <span class="n">Recipe</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()</span>
        <span class="n">index_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">()</span> <span class="k">if</span> <span class="n">index_list</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">index_list</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">index_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_list</span><span class="p">)))</span>

        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">index_list</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">data</span><span class="o">.</span><span class="n">Recipe</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">recipe</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">DataContentsChangeEvent</span><span class="p">(</span><span class="n">index_list</span><span class="p">,</span> <span class="n">data_list</span><span class="p">,</span> <span class="n">recipe_changed_list</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_list</span><span class="p">),</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.GetMsg"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetMsg">[docs]</a>    <span class="k">def</span> <span class="nf">GetMsg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the message for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Msg</span></div>

<div class="viewcode-block" id="DataManager.GetPath"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetPath">[docs]</a>    <span class="k">def</span> <span class="nf">GetPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the path for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Path</span></div>

<div class="viewcode-block" id="DataManager.GetSize"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetSize">[docs]</a>    <span class="k">def</span> <span class="nf">GetSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the size of spectrum for a specified index.</span>

<span class="sd">        :type index: int</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">GetSpectrumSize</span><span class="p">()</span></div>

<div class="viewcode-block" id="DataManager.GetDataSize"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetDataSize">[docs]</a>    <span class="k">def</span> <span class="nf">GetDataSize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the size of data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">())</span></div>

<div class="viewcode-block" id="DataManager.GetMainSelection"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetMainSelection">[docs]</a>    <span class="k">def</span> <span class="nf">GetMainSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return index of main selection.</span>

<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="DataManager.GetSelection"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetSelection">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of indexes for the selection.</span>

<span class="sd">        :rtype: Tuple[int, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="DataManager.Select"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.Select">[docs]</a>    <span class="k">def</span> <span class="nf">Select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_selection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">selection</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">operand</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change Data Selection.</span>

<span class="sd">        :param main_selection: If the main selection is int, select it; if None, deselect the selected one; if False, no change.</span>
<span class="sd">        :type main_selection: Union[int, False, None], optional</span>
<span class="sd">        :param selection: If the selection is a list of int, change the selection according to the operand; if None, deselect the all selection; if False, no change.</span>
<span class="sd">        :type selection: Union[Iterable[int], False, None], optional</span>
<span class="sd">        :param operand: The possible choices are &#39;|&#39;, &#39;-&#39;, &#39;^&#39; and None. They represent the sum set, difference set, exclusive set, and no change, respectively. defaults to None</span>
<span class="sd">        :type operand: Optional[str], optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">main_selection</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">selection</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selection</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">next_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">selection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">next_selection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">operand</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">next_selection</span> <span class="o">=</span> <span class="n">selection</span>
            <span class="k">elif</span> <span class="n">operand</span> <span class="o">==</span> <span class="s1">&#39;|&#39;</span><span class="p">:</span>
                <span class="n">next_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="n">selection</span>
            <span class="k">elif</span> <span class="n">operand</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
                <span class="n">next_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">selection</span>
            <span class="k">elif</span> <span class="n">operand</span> <span class="o">==</span> <span class="s1">&#39;^&#39;</span><span class="p">:</span>
                <span class="n">next_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">^</span> <span class="n">selection</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">main_selection</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">next_main_selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">next_main_selection</span> <span class="o">=</span> <span class="n">main_selection</span>

        <span class="k">if</span> <span class="n">next_main_selection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">next_selection</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">main_selection</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_selection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_main_selection</span><span class="p">)</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DataSelectionChangeEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.GetIndexList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.GetIndexList">[docs]</a>    <span class="k">def</span> <span class="nf">GetIndexList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_list</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">DataContainer</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the index list corresponding to the data list.</span>

<span class="sd">        :type data_list: Iterable[DataContainer]</span>
<span class="sd">        :rtype: List[int]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">index_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">data</span><span class="p">:</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">())}</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">index_dict</span><span class="p">[</span><span class="n">data</span><span class="p">]</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">]</span></div>

<div class="viewcode-block" id="DataManager.ExecuteSpectrumFunction"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.ExecuteSpectrumFunction">[docs]</a>    <span class="k">def</span> <span class="nf">ExecuteSpectrumFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executes the recipe provided for the data specified in the index list.</span>

<span class="sd">        :param index_list: If index_list is None, it will convert to all selections. Defaults to None</span>
<span class="sd">        :type index_list: Optional[Iterable[int]], optional</span>
<span class="sd">        :raises ValueError: [description]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetDataList</span><span class="p">()</span>
        <span class="n">index_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetDataSize</span><span class="p">()))</span> <span class="k">if</span> <span class="n">index_list</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">index_list</span>

        <span class="n">x_changed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">y_changed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bg_changed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">peaks_changed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_changed_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">index_list</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data_list</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

            <span class="n">x_changed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">y_changed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">bg_changed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">peaks_changed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">msg_changed_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

            <span class="n">new_success_list</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">SuccessList</span><span class="p">)</span>
            <span class="n">new_recipe</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Recipe</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_recipe</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">new_success_list</span><span class="p">[</span><span class="n">n</span><span class="p">]:</span>
                    <span class="k">continue</span>

                <span class="n">func_container</span> <span class="o">=</span> <span class="n">new_recipe</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">XY</span>
                <span class="n">bg</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">BackGround</span>
                <span class="n">peaks</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Peaks</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">params</span> <span class="o">=</span> <span class="n">func_container</span><span class="o">.</span><span class="n">Execution</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">peaks</span><span class="p">)</span>
                    <span class="n">new_success_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">func_container</span><span class="p">)</span><span class="si">}</span><span class="s1"> is successful in the execution.&#39;</span>
                    <span class="n">msg_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">new_success_list</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
                    <span class="n">msg_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">LogError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">break</span>

                <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">return_param</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">func_container</span><span class="o">.</span><span class="n">SendReturnParams</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">return_param</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">param</span>
                        <span class="n">x_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">return_param</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">param</span>
                        <span class="n">y_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">return_param</span> <span class="o">==</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span>
                        <span class="n">bg</span> <span class="o">=</span> <span class="n">param</span>
                        <span class="n">bg_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">elif</span> <span class="n">return_param</span> <span class="o">==</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">PeakFunctionContainerBase</span><span class="p">):</span>
                            <span class="n">param</span> <span class="o">=</span> <span class="n">PeakFunctionContainerList</span><span class="p">([</span><span class="n">param</span><span class="p">])</span>
                        <span class="n">peaks</span> <span class="o">=</span> <span class="n">param</span>
                        <span class="n">peaks_changed_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>

                <span class="n">data</span><span class="o">.</span><span class="n">Append</span><span class="p">(</span><span class="n">Spectrum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">peaks</span><span class="p">),</span> <span class="n">new_recipe</span><span class="p">,</span> <span class="n">new_success_list</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

        <span class="n">index_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetIndexList</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DataContentsChangeEvent</span><span class="p">(</span><span class="n">index_list</span><span class="p">,</span> <span class="n">data_list</span><span class="p">,</span> <span class="n">x_changed_list</span><span class="p">,</span> <span class="n">y_changed_list</span><span class="p">,</span> <span class="n">bg_changed_list</span><span class="p">,</span> <span class="n">peaks_changed_list</span><span class="p">,</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">index_list</span><span class="p">),</span> <span class="n">msg_changed_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DataManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DATA_SELECTION_CHANGE</span><span class="p">:</span>
            <span class="n">prv_main_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPreviousMainSelection</span><span class="p">()</span>
            <span class="n">crt_main_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetMainSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prv_main_selection</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__main_selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">crt_main_selection</span><span class="p">)</span>
            <span class="n">prv_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPreviousSelection</span><span class="p">()</span>
            <span class="n">crt_selection</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">prv_selection</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">crt_selection</span><span class="p">))</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DATA_CONTENTS_CHANGE</span><span class="p">:</span>
            <span class="n">index_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetIndexList</span><span class="p">()</span>
            <span class="n">data_list</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataList</span><span class="p">()</span>
            <span class="n">project</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__GetProject</span><span class="p">()</span>
            <span class="n">project</span><span class="o">.</span><span class="n">SetDataList</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">index_list</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_RECIPE_SELECT</span><span class="p">:</span>
            <span class="n">recipe</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetRecipe</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_recipe</span> <span class="o">=</span> <span class="n">recipe</span></div></div>


<div class="viewcode-block" id="SpectrumManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.SpectrumManager">[docs]</a><span class="k">class</span> <span class="nc">SpectrumManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager for drawing spectra</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="SpectrumManager.Draw"><a class="viewcode-back" href="../../isatex.html#isatex.manager.SpectrumManager.Draw">[docs]</a>    <span class="k">def</span> <span class="nf">Draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">need_bg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">need_peaks</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">multi_draw_alpha</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Draws a spectrum.</span>

<span class="sd">        :param need_bg: Whether the background needs to be drawn or not. Defaults to True</span>
<span class="sd">        :type need_bg: bool, optional</span>
<span class="sd">        :param need_peaks: Whether the peak needs to be drawn or not, defaults to False</span>
<span class="sd">        :type need_peaks: bool, optional</span>
<span class="sd">        :param multi_draw_alpha: Transparency of the drawing of spectra selected other than the main selection. Defaults to 0.0</span>
<span class="sd">        :type multi_draw_alpha: float, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">spectrum_panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">PANEL_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetPanel</span><span class="p">(</span><span class="n">SPECTRUM_PANEL</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">spectrum_panel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;set spectrum panel first!!&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>

        <span class="n">data_mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">DATA_MANAGER</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_mgr</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="n">main_selection</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetMainSelection</span><span class="p">()</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetSelection</span><span class="p">()</span>

        <span class="n">line_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bg_line_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">main_selection</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetXY</span><span class="p">(</span><span class="n">main_selection</span><span class="p">)</span>
            <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">need_bg</span><span class="p">:</span>
                <span class="n">bg</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetBackground</span><span class="p">(</span><span class="n">main_selection</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bg</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bg_line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bg</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">need_peaks</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">peak</span> <span class="ow">in</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetPeaks</span><span class="p">(</span><span class="n">main_selection</span><span class="p">):</span>
                    <span class="n">p_v</span> <span class="o">=</span> <span class="n">peak</span><span class="o">.</span><span class="n">Execution</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">main_ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">p_v</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">multi_draw_alpha</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">main_selection</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetXY</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">multi_draw_alpha</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">))</span>

                <span class="k">if</span> <span class="n">need_bg</span><span class="p">:</span>
                    <span class="n">bg</span> <span class="o">=</span> <span class="n">data_mgr</span><span class="o">.</span><span class="n">GetBackground</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">line_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">multi_draw_alpha</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">line_list</span><span class="p">:</span>
            <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">main_ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">need_bg</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">bg_line_list</span><span class="p">:</span>
                <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">bg_ax</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">main_ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">()</span>
        <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">bg_ax</span><span class="o">.</span><span class="n">autoscale</span><span class="p">()</span>
        <span class="n">spectrum_panel</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span></div>

<div class="viewcode-block" id="SpectrumManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.SpectrumManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PANEL_SELECTION_CHANGE</span><span class="p">:</span>
            <span class="n">panel</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetPanel</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">panel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">panel</span><span class="o">.</span><span class="n">NeedDraw</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span> <span class="o">=</span> <span class="n">panel</span>

        <span class="k">if</span> <span class="n">event_type</span> <span class="ow">in</span> <span class="p">[</span><span class="n">wxEVT_DATA_SELECTION_CHANGE</span><span class="p">,</span> <span class="n">wxEVT_DATA_CONTENTS_CHANGE</span><span class="p">,</span> <span class="n">wxEVT_PANEL_SELECTION_CHANGE</span><span class="p">,</span> <span class="n">wxEVT_PANEL_VIEW</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span><span class="o">.</span><span class="n">NeedDraw</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Draw</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">need_bg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span><span class="o">.</span><span class="n">NeedBackgroundDraw</span><span class="p">()</span>
                <span class="n">need_peaks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span><span class="o">.</span><span class="n">NeedPeaksDraw</span><span class="p">()</span>
                <span class="n">multi_alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__focus_panel</span><span class="o">.</span><span class="n">NeedMultiDraw</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">need_bg</span><span class="p">,</span> <span class="n">need_peaks</span><span class="p">,</span> <span class="n">multi_alpha</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="EncodeManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager">[docs]</a><span class="k">class</span> <span class="nc">EncodeManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manages parameters related to encode.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="EncodeManager.GetEncoding"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.GetEncoding">[docs]</a>    <span class="k">def</span> <span class="nf">GetEncoding</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the encoding to use when reading the file. This value is deepcopied.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">)</span></div>

<div class="viewcode-block" id="EncodeManager.SelectEncoding"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.SelectEncoding">[docs]</a>    <span class="k">def</span> <span class="nf">SelectEncoding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the encoding to be used when reading the file.</span>

<span class="sd">        :param encoding: type of encoding or instance of ChoiceContainer for encoding.</span>
<span class="sd">        :type encoding: Union[str, ChoiceContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">encoding_type</span> <span class="o">=</span> <span class="n">encoding</span>
            <span class="n">encoding</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">)</span>
            <span class="n">encoding</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">encoding_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>
        <span class="n">prev_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">EncodeEvent</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">previous_encoding</span><span class="o">=</span><span class="n">prev_encoding</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="EncodeManager.GetDelimiter"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.GetDelimiter">[docs]</a>    <span class="k">def</span> <span class="nf">GetDelimiter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Delimiter used to read files. This value is deepcopied.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span><span class="p">)</span></div>

<div class="viewcode-block" id="EncodeManager.SelectDelimiter"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.SelectDelimiter">[docs]</a>    <span class="k">def</span> <span class="nf">SelectDelimiter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the delimiter to be used when reading the file.</span>

<span class="sd">        :param delimiter: type of delimiter or instance of ChoiceContainer for delimiter.</span>
<span class="sd">        :type delimiter: Union[str, ChoiceContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">delimiter</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">delimiter_type</span> <span class="o">=</span> <span class="n">delimiter</span>
            <span class="n">delimiter</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span><span class="p">)</span>
            <span class="n">delimiter</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">delimiter_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_delimiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span> <span class="o">=</span> <span class="n">delimiter</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">EncodeEvent</span><span class="p">(</span><span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span> <span class="n">previous_delimiter</span><span class="o">=</span><span class="n">prev_delimiter</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="EncodeManager.GetEncodeFunctionNameContainer"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.GetEncodeFunctionNameContainer">[docs]</a>    <span class="k">def</span> <span class="nf">GetEncodeFunctionNameContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns an instance of ChoiceContainer that contains a list of encoding functions.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSelectedEncodeFunction</span><span class="p">()</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetEncodeFunctionList</span><span class="p">()</span>
        <span class="n">selected_name</span> <span class="o">=</span> <span class="n">selected_func</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">func_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">func_list</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="n">selected_name</span><span class="p">,</span> <span class="n">func_name_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="EncodeManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.EncodeManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_ENCODE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">IsEncodingChanged</span><span class="p">():</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEncoding</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="n">encoding</span>

            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">IsDelimiterChanged</span><span class="p">():</span>
                <span class="n">delimiter</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDelimiter</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span> <span class="o">=</span> <span class="n">delimiter</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">design</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">ENCODE_ENCODING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">),</span>
                <span class="p">(</span><span class="n">ENCODE_DELIMITER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__delimiter</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DecodeManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DecodeManager">[docs]</a><span class="k">class</span> <span class="nc">DecodeManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manages parameters related to decode.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="DecodeManager.GetEncoding"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DecodeManager.GetEncoding">[docs]</a>    <span class="k">def</span> <span class="nf">GetEncoding</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the encoding to use when reading the file. This value is deepcopied.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">)</span></div>

<div class="viewcode-block" id="DecodeManager.SelectEncoding"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DecodeManager.SelectEncoding">[docs]</a>    <span class="k">def</span> <span class="nf">SelectEncoding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the encoding to be used when reading the file.</span>

<span class="sd">        :param encoding: type of encoding or instance of ChoiceContainer for encoding.</span>
<span class="sd">        :type encoding: Union[str, ChoiceContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">encoding_type</span> <span class="o">=</span> <span class="n">encoding</span>
            <span class="n">encoding</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">)</span>
            <span class="n">encoding</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">encoding_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">encoding</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>
        <span class="n">prev_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DecodeEvent</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">previous_encoding</span><span class="o">=</span><span class="n">prev_encoding</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="DecodeManager.GetDecodeFunctionNameContainer"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DecodeManager.GetDecodeFunctionNameContainer">[docs]</a>    <span class="k">def</span> <span class="nf">GetDecodeFunctionNameContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get an instance of ChoiceContainer that contains a list of encoding functions.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetSelectedDecodeFunction</span><span class="p">()</span>
        <span class="n">func_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">FUNCTION_MANAGER</span><span class="p">)</span><span class="o">.</span><span class="n">GetDecodeFunctionList</span><span class="p">()</span>
        <span class="n">selected_name</span> <span class="o">=</span> <span class="n">selected_func</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">func_name_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">func_list</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ChoiceContainer</span><span class="p">(</span><span class="n">selected_name</span><span class="p">,</span> <span class="n">func_name_list</span><span class="p">)</span></div>

<div class="viewcode-block" id="DecodeManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.DecodeManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DECODE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">IsEncodingChanged</span><span class="p">():</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEncoding</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span> <span class="o">=</span> <span class="n">encoding</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">design</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">DECODE_ENCODING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__encoding</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MappingManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager">[docs]</a><span class="k">class</span> <span class="nc">MappingManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manages parameters related to mapping.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__table_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span> <span class="o">=</span> <span class="n">DEFAULT_DIRECTION_CONTAINER</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cmap</span> <span class="o">=</span> <span class="n">DEFAULT_COLORMAP</span>

<div class="viewcode-block" id="MappingManager.SetTableSize"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.SetTableSize">[docs]</a>    <span class="k">def</span> <span class="nf">SetTableSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set table size related to the mapping.</span>
<span class="sd">        Tuple[int, int],</span>
<span class="sd">        int, int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">HasValidElement</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">size</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__table_size</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">TableSizeChangeEvent</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">prev_size</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingManager.GetDirection"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.GetDirection">[docs]</a>    <span class="k">def</span> <span class="nf">GetDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Direction related to the mapping. The returned values are &quot;r2u, &quot;r2d&quot;, &quot;l2u&quot;, &quot;l2d&quot;, &quot;u2r&quot;, &quot;u2l&quot;, &quot;d2r&quot;, &quot;d2l&quot;.</span>
<span class="sd">        For example, r2d is</span>

<span class="sd">        0, 1, 2, 3,</span>

<span class="sd">        4, 5, 6, 7,</span>

<span class="sd">        8, 9, 10, 11,</span>

<span class="sd">        in that order.</span>

<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span></div>

<div class="viewcode-block" id="MappingManager.GetDirectionContainer"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.GetDirectionContainer">[docs]</a>    <span class="k">def</span> <span class="nf">GetDirectionContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChoiceContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get an instance of ChoiceContainer that contains a list of direction.</span>

<span class="sd">        :rtype: ChoiceContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingManager.SelectDirection"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.SelectDirection">[docs]</a>    <span class="k">def</span> <span class="nf">SelectDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select direction</span>

<span class="sd">        :param direction: One of &quot;r2u, &quot;r2d&quot;, &quot;l2u&quot;, &quot;l2d&quot;, &quot;u2r&quot;, &quot;u2l&quot;, &quot;d2r&quot;, &quot;d2l&quot;.</span>
<span class="sd">        :type direction: Union[str, ChoiceContainer]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">ChoiceContainer</span><span class="p">):</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="n">direction</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="o">.</span><span class="n">IsValidValue</span><span class="p">(</span><span class="n">direction</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>

        <span class="n">prev_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDirection</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">DirectionChangeEvent</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">prev_dir</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingManager.GetDirectionList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.GetDirectionList">[docs]</a>    <span class="k">def</span> <span class="nf">GetDirectionList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of direction.</span>

<span class="sd">        :rtype: Tuple[str, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="o">.</span><span class="n">GetChoices</span><span class="p">())</span></div>

<div class="viewcode-block" id="MappingManager.GetColormap"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.GetColormap">[docs]</a>    <span class="k">def</span> <span class="nf">GetColormap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Colormap</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the colormap specified by name. If not specified, it gets the selected colormap.</span>

<span class="sd">        :type name: str, optional</span>
<span class="sd">        :rtype: Colormap</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cmap</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Colormap</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingManager.SelectColormap"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.SelectColormap">[docs]</a>    <span class="k">def</span> <span class="nf">SelectColormap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Colormap</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Select the colormap related to the mapping.</span>

<span class="sd">        :type cmap: Union[str, Colormap]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">Colormap</span><span class="p">):</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span><span class="o">.</span><span class="n">name</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="n">prev_cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cmap</span> <span class="o">=</span> <span class="n">cmap</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ColormapChangeEvent</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="n">prev_cmap</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="MappingManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.MappingManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_TABLE_SIZE_CHANGE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__table_size</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetTableSize</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_DIRECTION_CHANGE</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDirection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_COLORMAP_CHANGE</span><span class="p">:</span>
            <span class="n">cmap</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetColorMap</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_cmap</span> <span class="o">=</span> <span class="n">cmap</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">MAPPING_TABLE_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__table_size</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">MAPPING_DIRECTION</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__direction</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">MAPPING_COLORMAP</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmap</span><span class="p">)</span></div></div>


<span class="c1"># TODO: Create Color Theme Object</span>
<div class="viewcode-block" id="ColorManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager">[docs]</a><span class="k">class</span> <span class="nc">ColorManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Managers related to color</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_color_theme_name</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="ColorManager.GetDefaultColorTheme"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetDefaultColorTheme">[docs]</a>    <span class="k">def</span> <span class="nf">GetDefaultColorTheme</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;NAME&quot;</span><span class="p">:</span> <span class="s2">&quot;Default Color&quot;</span><span class="p">,</span>
            <span class="s2">&quot;COLOR&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;MAIN_SELECTION&quot;</span><span class="p">:</span> <span class="s2">&quot;#fd7e00&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SELECTION&quot;</span><span class="p">:</span> <span class="s2">&quot;#FFD400&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SUCCESS&quot;</span><span class="p">:</span> <span class="s2">&quot;#00ff00&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span> <span class="s2">&quot;#ff0000&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="ColorManager.RegisterColorThemeList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.RegisterColorThemeList">[docs]</a>    <span class="k">def</span> <span class="nf">RegisterColorThemeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_theme_list</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Register a list of color themes.</span>

<span class="sd">        :type color_theme_list: Union[List, Tuple, Dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color_theme_list</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">color_theme_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">color_theme_list</span><span class="p">]</span>

        <span class="n">prev_color_theme_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetColorThemeList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">color_theme</span> <span class="ow">in</span> <span class="n">color_theme_list</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">color_theme</span><span class="p">[</span><span class="n">NAME</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_theme</span>

        <span class="k">if</span> <span class="n">DEFAULT_COLOR_THEME</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="p">:</span>
            <span class="n">default_color_theme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetDefaultColorTheme</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">default_color_theme</span><span class="p">[</span><span class="n">NAME</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_color_theme</span>

        <span class="n">color_theme_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetColorThemeList</span><span class="p">()</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">ColorRegisterEvent</span><span class="p">(</span><span class="n">color_theme_list</span><span class="p">,</span> <span class="n">prev_color_theme_list</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorManager.GetColorTheme"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetColorTheme">[docs]</a>    <span class="k">def</span> <span class="nf">GetColorTheme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets the color theme specified by name. If not found, an empty dictionary is returned.</span>

<span class="sd">        :type name: str</span>
<span class="sd">        :return: Color theme</span>
<span class="sd">        :rtype: Dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span></div>

<div class="viewcode-block" id="ColorManager.GetSelectedColorTheme"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetSelectedColorTheme">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectedColorTheme</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selected color theme.</span>

<span class="sd">        :rtype: Dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetColorTheme</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__selected_color_theme_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorManager.GetColorThemeNames"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetColorThemeNames">[docs]</a>    <span class="k">def</span> <span class="nf">GetColorThemeNames</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered color theme names.</span>

<span class="sd">        :rtype: Tuple[str, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="ColorManager.GetColorThemeList"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetColorThemeList">[docs]</a>    <span class="k">def</span> <span class="nf">GetColorThemeList</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a list of registered color themes.</span>

<span class="sd">        :rtype: Tuple[Dict, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>

<div class="viewcode-block" id="ColorManager.SelectColorTheme"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.SelectColorTheme">[docs]</a>    <span class="k">def</span> <span class="nf">SelectColorTheme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Select a color theme.</span>

<span class="sd">        :param name: The name of the registered color theme.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selected_color_theme_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="n">color_theme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedColorTheme</span><span class="p">()</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">ColorSelectionEvent</span><span class="p">(</span><span class="n">color_theme</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="ColorManager.GetMainSelectionColor"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetMainSelectionColor">[docs]</a>    <span class="k">def</span> <span class="nf">GetMainSelectionColor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the main selection color from the selected color theme.</span>

<span class="sd">        :return: e.g. #000000 ~ #FFFFFF</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedColorTheme</span><span class="p">()[</span><span class="n">DotChain</span><span class="p">(</span><span class="n">COLOR</span><span class="p">,</span> <span class="n">MAIN_SELECTION_COLOR</span><span class="p">)]</span></div>

<div class="viewcode-block" id="ColorManager.GetSelectionColor"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetSelectionColor">[docs]</a>    <span class="k">def</span> <span class="nf">GetSelectionColor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the selection color from the selected color theme.</span>

<span class="sd">        :return: e.g. #000000 ~ #FFFFFF</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedColorTheme</span><span class="p">()[</span><span class="n">SELECTION_COLOR</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColorManager.GetSuccessColor"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetSuccessColor">[docs]</a>    <span class="k">def</span> <span class="nf">GetSuccessColor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the success color from the selected color theme.</span>

<span class="sd">        :return: e.g. #000000 ~ #FFFFFF</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedColorTheme</span><span class="p">()[</span><span class="n">SUCCESS_COLOR</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColorManager.GetErrorColor"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.GetErrorColor">[docs]</a>    <span class="k">def</span> <span class="nf">GetErrorColor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the error color from the selected color theme.</span>

<span class="sd">        :return: e.g. #000000 ~ #FFFFFF</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetSelectedColorTheme</span><span class="p">()[</span><span class="n">ERROR_COLOR</span><span class="p">]</span></div>

<div class="viewcode-block" id="ColorManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.ColorManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">GetId</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_COLOR_REGISTER</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">color_theme</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">GetColorThemeList</span><span class="p">():</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">color_theme</span><span class="p">[</span><span class="n">NAME</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__color_theme_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_theme</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_COLOR_SELECT</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetName</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__selected_color_theme_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">color_theme_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetColorThemeList</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SaveColorThemeList</span><span class="p">(</span><span class="n">color_theme_list</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="PreferenceManager"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PreferenceManager">[docs]</a><span class="k">class</span> <span class="nc">PreferenceManager</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Managers related to preference</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Default constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;core_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;io_manager&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__id</span> <span class="o">=</span> <span class="n">NewIdRef</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<div class="viewcode-block" id="PreferenceManager.GetDataBufferSize"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PreferenceManager.GetDataBufferSize">[docs]</a>    <span class="k">def</span> <span class="nf">GetDataBufferSize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get the data buffer size.</span>

<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span></div>

<div class="viewcode-block" id="PreferenceManager.GetDataBufferSizeContainer"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PreferenceManager.GetDataBufferSizeContainer">[docs]</a>    <span class="k">def</span> <span class="nf">GetDataBufferSizeContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">IntContainer</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get an IntContainer containing the data buffer size.</span>

<span class="sd">        :rtype: IntContainer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">IntContainer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MAX_DATA_BUFFER_SIZE</span><span class="p">)</span></div>

<div class="viewcode-block" id="PreferenceManager.SetDataBufferSize"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PreferenceManager.SetDataBufferSize">[docs]</a>    <span class="k">def</span> <span class="nf">SetDataBufferSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the data buffer size, which must be greater than or equal to 0.</span>

<span class="sd">        :type size: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">IntContainer</span><span class="p">):</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">()</span>

        <span class="n">prev_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span> <span class="o">=</span> <span class="n">size</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">PreferenceEvent</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">prev_size</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__core_mgr</span><span class="o">.</span><span class="n">SendEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div>

<div class="viewcode-block" id="PreferenceManager.OnEvent"><a class="viewcode-back" href="../../isatex.html#isatex.manager.PreferenceManager.OnEvent">[docs]</a>    <span class="k">def</span> <span class="nf">OnEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetEventType</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_PREFERENCE</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">IsDataBufferSizeChanged</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetDataBufferSize</span><span class="p">()</span>

        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="n">wxEVT_EXIT</span><span class="p">:</span>
            <span class="n">design</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">DATA_BUFFER_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data_buffer</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">design</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__io_mgr</span><span class="o">.</span><span class="n">SetSetting</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div></div>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;IOManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EventManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MenubarManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PanelManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FunctionManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ProjectManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PeakManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DataManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SpectrumManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EncodeManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DecodeManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MappingManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ColorManager&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PreferenceManager&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ryo Tandai.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>